import{r as n,u as S,j as e,N as L,M as E,S as A,L as D}from"./index-C6fZJ48e.js";import{B as k}from"./button-CjSaidot.js";import{I as p}from"./input-ZoKW3yZy.js";import{C as P,a as I,b as B,c as F,d as q}from"./card-D80GW863.js";import{L as b}from"./label-Cb1HMnpx.js";import{A as T,a as H}from"./alert-Civ_HrAB.js";import{a as g}from"./ApiService-bGFnA_mg.js";import{E as M}from"./eye-off-CwyNIguP.js";import{E as O}from"./eye-qORrMeX6.js";import{L as U}from"./loader-circle-tNDcm6lY.js";function Z(){const[t,o]=n.useState({username:"",password:""}),[m,l]=n.useState(""),[i,f]=n.useState(!1),[d,c]=n.useState(!1),[j,R]=n.useState(!0),u=S(),w=!!localStorage.getItem("authToken"),N={admin:{username:"admin",password:"admin123",role:"Administrator"},admin2:{username:"admin2",password:"admin123",role:"Deputy Admin"}};if(w)return e.jsx(L,{to:"/admin",replace:!0});const y=async a=>{var s,r;a.preventDefault(),l(""),c(!0);try{(await g.Auth.dummyLogin(t.username,t.password)).success?u("/admin"):l("Login failed. Please try again.")}catch{try{(await g.Auth.login(t.username,t.password)).access_token?u("/admin"):l("Login failed. Please try again.")}catch(h){l(((r=(s=h.response)==null?void 0:s.data)==null?void 0:r.detail)||"Login failed. Please try again.")}}finally{c(!1)}},x=a=>{o(s=>({...s,[a.target.name]:a.target.value}))},v=(a,s)=>{o({username:a,password:s}),setTimeout(()=>{const r=document.getElementById("admin-login-form");r&&r.requestSubmit()},100)};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-emerald-50 to-teal-50 p-4",children:e.jsxs(P,{className:"w-full max-w-md shadow-xl border-0 bg-white/80 backdrop-blur-sm",children:[e.jsxs(I,{className:"space-y-4 text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(E,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx(B,{className:"text-2xl font-bold text-blue-700",children:"DairyChain Pro"}),e.jsx(F,{className:"text-blue-600",children:"Admin Portal"})]})]}),e.jsxs(q,{children:[e.jsxs("form",{id:"admin-login-form",onSubmit:y,className:"space-y-4",children:[m&&e.jsx(T,{className:"border-red-200 bg-red-50",children:e.jsx(H,{className:"text-red-800",children:m})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"username",className:"text-blue-700 font-medium",children:"Username or Email"}),e.jsx(p,{id:"username",name:"username",type:"text",value:t.username,onChange:x,placeholder:"Enter your username or email",required:!0,className:"border-blue-200 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"password",className:"text-blue-700 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{id:"password",name:"password",type:i?"text":"password",value:t.password,onChange:x,placeholder:"Enter your password",required:!0,className:"border-blue-200 focus:border-blue-500 focus:ring-blue-500 pr-10"}),e.jsx("button",{type:"button",onClick:()=>f(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-blue-600 hover:text-blue-700",children:i?e.jsx(M,{className:"h-4 w-4"}):e.jsx(O,{className:"h-4 w-4"})})]})]}),e.jsx(k,{type:"submit",disabled:d,className:"w-full bg-blue-600 hover:bg-blue-700 text-white shadow-lg",children:d?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing In..."]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Admin Sign In"]})})]}),j&&e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-md",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Demo Credentials:"}),e.jsx("div",{className:"space-y-2",children:Object.entries(N).map(([a,s])=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-blue-700",children:[e.jsxs("strong",{children:[s.role,":"]})," ",s.username," / ",s.password]}),e.jsx("button",{type:"button",onClick:()=>v(s.username,s.password),className:"text-blue-600 hover:text-blue-800 underline",children:"Use"})]},a))})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(D,{to:"/",className:"text-sm text-blue-600 hover:text-blue-700 underline",children:"‚Üê Back to Homepage"})})]})]})})}export{Z as default};
