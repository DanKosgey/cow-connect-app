import{r as n,u as S,j as e,N as E,M as F,T as D,L as f}from"./index-C6fZJ48e.js";import{B as k}from"./button-CjSaidot.js";import{I as p}from"./input-ZoKW3yZy.js";import{C as A,a as P,b as I,c as T,d as B}from"./card-D80GW863.js";import{L as j}from"./label-Cb1HMnpx.js";import{A as q,a as O}from"./alert-Civ_HrAB.js";import{a as w}from"./ApiService-bGFnA_mg.js";import{E as H}from"./eye-off-CwyNIguP.js";import{E as M}from"./eye-qORrMeX6.js";import{L as U}from"./loader-circle-tNDcm6lY.js";function Z(){const[a,l]=n.useState({username:"",password:""}),[c,o]=n.useState(""),[i,N]=n.useState(!1),[d,u]=n.useState(!1),[y,_]=n.useState(!0),x=S(),b=!!localStorage.getItem("authToken"),v={farmer:{username:"farmer",password:"farmer123",role:"Farmer",farm:"Doe Dairy Farm"},farmer2:{username:"farmer2",password:"farmer123",role:"Farmer",farm:"Smith Organic Farm"}};if(b)return e.jsx(E,{to:"/farmer/profile",replace:!0});const C=async s=>{var r,t;s.preventDefault(),o(""),u(!0);try{const m=await w.Auth.dummyLogin(a.username,a.password);m.success&&m.user&&m.redirect_url.includes("farmer")?x("/farmer/profile"):o("Invalid farmer credentials")}catch{try{(await w.Auth.login(a.username,a.password)).access_token?x("/farmer/profile"):o("Login failed. Please try again.")}catch(h){o(((t=(r=h.response)==null?void 0:r.data)==null?void 0:t.detail)||"Login failed. Please try again.")}}finally{u(!1)}},g=s=>{l(r=>({...r,[s.target.name]:s.target.value}))},L=(s,r)=>{l({username:s,password:r}),setTimeout(()=>{const t=document.getElementById("farmer-login-form");t&&t.requestSubmit()},100)};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-emerald-50 p-4",children:e.jsxs(A,{className:"w-full max-w-md shadow-xl border-0 bg-white/80 backdrop-blur-sm",children:[e.jsxs(P,{className:"space-y-4 text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(F,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx(I,{className:"text-2xl font-bold text-green-700",children:"DairyChain Pro"}),e.jsx(T,{className:"text-green-600",children:"Farmer Portal"})]})]}),e.jsxs(B,{children:[e.jsxs("form",{id:"farmer-login-form",onSubmit:C,className:"space-y-4",children:[c&&e.jsx(q,{className:"border-red-200 bg-red-50",children:e.jsx(O,{className:"text-red-800",children:c})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"username",className:"text-green-700 font-medium",children:"Username or Email"}),e.jsx(p,{id:"username",name:"username",type:"text",value:a.username,onChange:g,placeholder:"Enter your username or email",required:!0,className:"border-green-200 focus:border-green-500 focus:ring-green-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"password",className:"text-green-700 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{id:"password",name:"password",type:i?"text":"password",value:a.password,onChange:g,placeholder:"Enter your password",required:!0,className:"border-green-200 focus:border-green-500 focus:ring-green-500 pr-10"}),e.jsx("button",{type:"button",onClick:()=>N(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-green-600 hover:text-green-700",children:i?e.jsx(H,{className:"h-4 w-4"}):e.jsx(M,{className:"h-4 w-4"})})]})]}),e.jsx(k,{type:"submit",disabled:d,className:"w-full bg-green-600 hover:bg-green-700 text-white shadow-lg",children:d?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing In..."]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),"Farmer Login"]})})]}),y&&e.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-md",children:[e.jsx("h3",{className:"text-sm font-medium text-green-900 mb-2",children:"Demo Farmer Accounts:"}),e.jsx("div",{className:"space-y-2",children:Object.entries(v).map(([s,r])=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-green-700",children:[e.jsxs("strong",{children:[r.farm,":"]})," ",r.username," / ",r.password]}),e.jsx("button",{type:"button",onClick:()=>L(r.username,r.password),className:"text-green-600 hover:text-green-800 underline",children:"Use"})]},s))})]}),e.jsxs("div",{className:"mt-6 text-center space-y-2",children:[e.jsx(f,{to:"/farmer/register",className:"text-green-600 hover:text-green-500 text-sm underline",children:"New farmer? Sign up here →"}),e.jsx("br",{}),e.jsx(f,{to:"/",className:"text-gray-600 hover:text-gray-500 text-sm",children:"← Back to Homepage"})]})]})]})})}export{Z as default};
