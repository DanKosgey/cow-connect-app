import{r as o,u as k,j as e,N as L,M as I,U as E,L as F}from"./index-C6fZJ48e.js";import{B as A}from"./button-CjSaidot.js";import{I as h}from"./input-ZoKW3yZy.js";import{C as D,a as P,b as T,c as B,d as U}from"./card-D80GW863.js";import{L as p}from"./label-Cb1HMnpx.js";import{A as q,a as M}from"./alert-Civ_HrAB.js";import{a as b}from"./ApiService-bGFnA_mg.js";import{E as R}from"./eye-off-CwyNIguP.js";import{E as H}from"./eye-qORrMeX6.js";import{L as O}from"./loader-circle-tNDcm6lY.js";function Y(){const[r,d]=o.useState({username:"",password:""}),[m,t]=o.useState(""),[l,g]=o.useState(!1),[c,i]=o.useState(!1),[w,W]=o.useState(!0),u=k(),j=!!localStorage.getItem("authToken"),N={worker:{username:"worker",password:"worker123",role:"Field Worker",staffId:"STAFF001"},worker2:{username:"worker2",password:"worker123",role:"Field Worker",staffId:"STAFF002"},manager:{username:"manager",password:"manager123",role:"Manager",staffId:"STAFF003"}};if(j)return e.jsx(L,{to:"/staff/dashboard",replace:!0});const y=async a=>{var s,n;if(a.preventDefault(),t(""),i(!0),!S(r.username)){t("Please enter a valid staff ID (6-12 alphanumeric characters)"),i(!1);return}try{(await b.Auth.dummyLogin(r.username,r.password)).success?u("/staff/dashboard"):t("Login failed. Please try again.")}catch{try{(await b.Auth.login(r.username,r.password)).access_token?u("/staff/dashboard"):t("Login failed. Please try again.")}catch(x){t(((n=(s=x.response)==null?void 0:s.data)==null?void 0:n.detail)||"Login failed. Please try again.")}}finally{i(!1)}},f=a=>{d(s=>({...s,[a.target.name]:a.target.value}))},v=(a,s)=>{d({username:a,password:s}),setTimeout(()=>{const n=document.getElementById("staff-login-form");n&&n.requestSubmit()},100)},S=a=>/^[A-Za-z0-9]{6,12}$/.test(a);return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-50 p-4",children:e.jsxs(D,{className:"w-full max-w-md shadow-xl border-0 bg-white/80 backdrop-blur-sm",children:[e.jsxs(P,{className:"space-y-4 text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(I,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx(T,{className:"text-2xl font-bold text-blue-700",children:"DairyChain Pro"}),e.jsx(B,{className:"text-blue-600",children:"Staff Portal"})]})]}),e.jsxs(U,{children:[e.jsxs("form",{id:"staff-login-form",onSubmit:y,className:"space-y-4",children:[m&&e.jsx(q,{className:"border-red-200 bg-red-50",children:e.jsx(M,{className:"text-red-800",children:m})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"username",className:"text-blue-700 font-medium",children:"Username or Email"}),e.jsx(h,{id:"username",name:"username",type:"text",value:r.username,onChange:f,placeholder:"Enter your username or email",required:!0,className:"border-blue-200 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"password",className:"text-blue-700 font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{id:"password",name:"password",type:l?"text":"password",value:r.password,onChange:f,placeholder:"Enter your password",required:!0,className:"border-blue-200 focus:border-blue-500 focus:ring-blue-500 pr-10"}),e.jsx("button",{type:"button",onClick:()=>g(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-blue-600 hover:text-blue-700",children:l?e.jsx(R,{className:"h-4 w-4"}):e.jsx(H,{className:"h-4 w-4"})})]})]}),e.jsx(A,{type:"submit",disabled:c,className:"w-full bg-blue-600 hover:bg-blue-700 text-white shadow-lg",children:c?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing In..."]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),"Staff Sign In"]})})]}),w&&e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-md",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Demo Credentials:"}),e.jsx("div",{className:"space-y-2",children:Object.entries(N).map(([a,s])=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-blue-700",children:[e.jsxs("strong",{children:[s.role,":"]})," ",s.username," / ",s.password]}),e.jsx("button",{type:"button",onClick:()=>v(s.username,s.password),className:"text-blue-600 hover:text-blue-800 underline",children:"Use"})]},a))})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(F,{to:"/",className:"text-sm text-blue-600 hover:text-blue-700 underline",children:"‚Üê Back to Homepage"})})]})]})})}export{Y as default};
