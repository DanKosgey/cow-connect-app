import{e as q,j as e,M as Ce,U as Gt,r as a,f as Ve,g as Vt,h as Ue,i as we,R as Ut,A as $t,P as xe,k as Kt,l as re,m as j,n as Y,o as Bt,p as qt,D as Yt,C as zt,q as Xt,s as Ht,t as L,a as Wt}from"./index-C6fZJ48e.js";import{C as Z,a as je,b as ye,c as Qt,d as J}from"./card-D80GW863.js";import{B as I}from"./button-CjSaidot.js";import{I as le}from"./input-ZoKW3yZy.js";import{L as W}from"./label-Cb1HMnpx.js";import{B as Q}from"./badge-Bb0m1QXe.js";import{a as Fe}from"./ApiService-bGFnA_mg.js";import{C as Ne}from"./calendar-B8DrZPNE.js";import{T as Zt}from"./thermometer-17IlW1ep.js";import{M as $e}from"./map-pin-B94T8gzc.js";import{C as Jt}from"./circle-check-big-CorUa3eH.js";import{D as Me}from"./download-DAyV_9mL.js";import{u as en}from"./index-Bmq6tP-i.js";import{h as tn,u as nn,R as sn,F as rn}from"./Combination-D2BFsl2-.js";import{c as Ke,I as an,R as on}from"./index-7U90ZyfE.js";import{C as cn}from"./check-wjAQzcvr.js";import{R as ln}from"./refresh-cw-BiFb2P_u.js";import{S as dn}from"./scale-DPhZ4N1V.js";import{f as un}from"./format-BoV-TgZi.js";import{E as Le}from"./eye-qORrMeX6.js";import{T as mn}from"./triangle-alert-DiNmet34.js";import"./en-US-wfBU2YNu.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=q("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=q("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=q("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=q("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=q("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=q("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]),vn=({collection:t,onClose:s,onDownloadReceipt:n})=>{var c,i;const r=()=>{navigator.clipboard.writeText(t.validation_code)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(Z,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(je,{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(ye,{className:"flex items-center",children:[e.jsx(Ce,{className:"h-5 w-5 mr-2 text-green-600"}),"Collection Details"]}),e.jsx(Qt,{children:"Detailed information about your milk collection"})]}),e.jsx(I,{variant:"ghost",onClick:s,className:"text-gray-500 hover:text-gray-700",children:e.jsx("span",{className:"text-2xl",children:"×"})})]})}),e.jsxs(J,{className:"p-6",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[t.liters,"L Milk Collection"]}),e.jsxs("p",{className:"text-gray-600",children:["Collection ID: ",t.id]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:["Grade ",t.quality_grade]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:new Date(t.timestamp).toLocaleDateString()})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(Ne,{className:"h-4 w-4 mr-2 text-gray-500"}),"Date & Time"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Date:"}),e.jsx("span",{className:"font-medium",children:new Date(t.timestamp).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Time:"}),e.jsx("span",{className:"font-medium",children:new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(Zt,{className:"h-4 w-4 mr-2 text-gray-500"}),"Quality Metrics"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Temperature:"}),e.jsxs("span",{className:"font-medium",children:[t.temperature,"°C"]})]}),t.fat_content&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Fat Content:"}),e.jsxs("span",{className:"font-medium",children:[t.fat_content,"%"]})]}),t.protein_content&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Protein Content:"}),e.jsxs("span",{className:"font-medium",children:[t.protein_content,"%"]})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2 text-gray-500"}),"Staff Information"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Staff Name:"}),e.jsx("span",{className:"font-medium",children:"David Ochieng"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Staff ID:"}),e.jsx("span",{className:"font-medium",children:"STAFF-00124"})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx($e,{className:"h-4 w-4 mr-2 text-gray-500"}),"Location"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Coordinates:"}),e.jsxs("span",{className:"font-medium",children:[(c=t.gps_latitude)==null?void 0:c.toFixed(4),", ",(i=t.gps_longitude)==null?void 0:i.toFixed(4)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Collection Center:"}),e.jsx("span",{className:"font-medium",children:"Nairobi Main Center"})]})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-6",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(Jt,{className:"h-4 w-4 mr-2 text-gray-500"}),"Validation Code"]}),e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded",children:[e.jsx("span",{className:"font-mono text-lg font-bold",children:t.validation_code}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(I,{variant:"outline",size:"sm",onClick:r,className:"flex items-center",children:[e.jsx(hn,{className:"h-4 w-4 mr-1"}),"Copy"]}),n&&e.jsxs(I,{variant:"outline",size:"sm",onClick:n,className:"flex items-center",children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Receipt"]})]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Collection Notes"}),e.jsx("p",{className:"text-gray-600",children:"No additional notes for this collection."})]}),e.jsx("div",{className:"flex justify-end space-x-3 mt-6",children:e.jsx(I,{variant:"outline",onClick:s,children:"Close"})})]})]})})};function Cn({onRefresh:t,threshold:s=80,disabled:n=!1}){const[r,c]=a.useState(!1),[i,d]=a.useState(0),[u,h]=a.useState(!1),g=a.useRef(0),m=a.useRef(null),o=a.useCallback(p=>{if(n||r)return;const _=m.current;_&&_.scrollTop===0&&(g.current=p.touches[0].clientY,h(!0))},[n,r]),x=a.useCallback(p=>{if(n||!u||r)return;const _=m.current;if(!_||_.scrollTop!==0)return;const E=p.touches[0].clientY-g.current;E>0&&(p.preventDefault(),d(Math.min(E,s*1.5)))},[n,u,r,s]),v=a.useCallback(async()=>{if(!(n||!u))if(h(!1),i>=s){c(!0),d(0);try{await t()}finally{c(!1)}}else d(0)},[n,u,i,s,t]);a.useEffect(()=>{const p=m.current;if(!(!p||n))return p.addEventListener("touchstart",o,{passive:!1}),p.addEventListener("touchmove",x,{passive:!1}),p.addEventListener("touchend",v),()=>{p.removeEventListener("touchstart",o),p.removeEventListener("touchmove",x),p.removeEventListener("touchend",v)}},[o,x,v,n]);const C=()=>Math.min(i/s,1),M=()=>({position:"absolute",top:`${Math.max(i-s,-50)}px`,left:"50%",transform:"translateX(-50%)",transition:u?"none":"top 0.3s ease",zIndex:10});return{elementRef:m,isRefreshing:r,isPulling:u,pullDistance:i,pullProgress:C(),refreshIndicatorStyle:M()}}const jn=({onLongPress:t,onClick:s,onLongPressEnd:n,threshold:r=500})=>{const[c,i]=a.useState("click"),d=a.useRef(null),u=a.useRef(!1),h=a.useCallback(p=>{p.type==="mousedown"&&p.button!==0||(u.current=!1,d.current=setTimeout(()=>{u.current=!0,i("longpress")},r))},[t,r]),g=a.useCallback((p,_=!0)=>{d.current&&(clearTimeout(d.current),d.current=null),u.current&&n?n(p):_&&s&&s(p),u.current=!1},[s,n]),m=a.useCallback(p=>{h(p)},[h]),o=a.useCallback(p=>{g(p,!1)},[g]),x=a.useCallback(p=>{h(p)},[h]),v=a.useCallback(p=>{g(p)},[g]),C=a.useCallback(p=>{c==="longpress"&&(p.preventDefault(),p.stopPropagation())},[c]),M=a.useCallback(p=>{u.current&&p.preventDefault()},[]);return{touchStart:m,touchEnd:o,mouseDown:x,mouseUp:v,click:C,contextMenu:M}};var be=["Enter"," "],yn=["ArrowDown","PageUp","Home"],qe=["ArrowUp","PageDown","End"],Nn=[...yn,...qe],Mn={ltr:[...be,"ArrowRight"],rtl:[...be,"ArrowLeft"]},bn={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ae="Menu",[ne,wn,_n]=Vt(ae),[G,Ye]=Ve(ae,[_n,Ue,Ke]),fe=Ue(),ze=Ke(),[Rn,V]=G(ae),[Sn,oe]=G(ae),Xe=t=>{const{__scopeMenu:s,open:n=!1,children:r,dir:c,onOpenChange:i,modal:d=!0}=t,u=fe(s),[h,g]=a.useState(null),m=a.useRef(!1),o=we(i),x=en(c);return a.useEffect(()=>{const v=()=>{m.current=!0,document.addEventListener("pointerdown",C,{capture:!0,once:!0}),document.addEventListener("pointermove",C,{capture:!0,once:!0})},C=()=>m.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",C,{capture:!0}),document.removeEventListener("pointermove",C,{capture:!0})}},[]),e.jsx(Ut,{...u,children:e.jsx(Rn,{scope:s,open:n,onOpenChange:o,content:h,onContentChange:g,children:e.jsx(Sn,{scope:s,onClose:a.useCallback(()=>o(!1),[o]),isUsingKeyboardRef:m,dir:x,modal:d,children:r})})})};Xe.displayName=ae;var Pn="MenuAnchor",_e=a.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t,c=fe(n);return e.jsx($t,{...c,...r,ref:s})});_e.displayName=Pn;var Re="MenuPortal",[En,He]=G(Re,{forceMount:void 0}),We=t=>{const{__scopeMenu:s,forceMount:n,children:r,container:c}=t,i=V(Re,s);return e.jsx(En,{scope:s,forceMount:n,children:e.jsx(xe,{present:n||i.open,children:e.jsx(Kt,{asChild:!0,container:c,children:r})})})};We.displayName=Re;var P="MenuContent",[Tn,Se]=G(P),Qe=a.forwardRef((t,s)=>{const n=He(P,t.__scopeMenu),{forceMount:r=n.forceMount,...c}=t,i=V(P,t.__scopeMenu),d=oe(P,t.__scopeMenu);return e.jsx(ne.Provider,{scope:t.__scopeMenu,children:e.jsx(xe,{present:r||i.open,children:e.jsx(ne.Slot,{scope:t.__scopeMenu,children:d.modal?e.jsx(In,{...c,ref:s}):e.jsx(kn,{...c,ref:s})})})})}),In=a.forwardRef((t,s)=>{const n=V(P,t.__scopeMenu),r=a.useRef(null),c=re(s,r);return a.useEffect(()=>{const i=r.current;if(i)return tn(i)},[]),e.jsx(Pe,{...t,ref:c,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:j(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),kn=a.forwardRef((t,s)=>{const n=V(P,t.__scopeMenu);return e.jsx(Pe,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Dn=qt("MenuContent.ScrollLock"),Pe=a.forwardRef((t,s)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:c,onOpenAutoFocus:i,onCloseAutoFocus:d,disableOutsidePointerEvents:u,onEntryFocus:h,onEscapeKeyDown:g,onPointerDownOutside:m,onFocusOutside:o,onInteractOutside:x,onDismiss:v,disableOutsideScroll:C,...M}=t,p=V(P,n),_=oe(P,n),D=fe(n),E=ze(n),ce=wn(n),[U,z]=a.useState(null),$=a.useRef(null),A=re(s,$,p.onContentChange),O=a.useRef(0),F=a.useRef(""),R=a.useRef(0),X=a.useRef(null),ie=a.useRef("right"),K=a.useRef(0),pe=C?sn:a.Fragment,ge=C?{as:Dn,allowPinchZoom:!0}:void 0,l=f=>{var B,Ae;const N=F.current+f,S=ce().filter(k=>!k.disabled),b=document.activeElement,T=(B=S.find(k=>k.ref.current===b))==null?void 0:B.textValue,ve=S.map(k=>k.textValue),De=Yn(ve,N,T),H=(Ae=S.find(k=>k.textValue===De))==null?void 0:Ae.ref.current;(function k(Oe){F.current=Oe,window.clearTimeout(O.current),Oe!==""&&(O.current=window.setTimeout(()=>k(""),1e3))})(N),H&&setTimeout(()=>H.focus())};a.useEffect(()=>()=>window.clearTimeout(O.current),[]),nn();const y=a.useCallback(f=>{var S,b;return ie.current===((S=X.current)==null?void 0:S.side)&&Xn(f,(b=X.current)==null?void 0:b.area)},[]);return e.jsx(Tn,{scope:n,searchRef:F,onItemEnter:a.useCallback(f=>{y(f)&&f.preventDefault()},[y]),onItemLeave:a.useCallback(f=>{var N;y(f)||((N=$.current)==null||N.focus(),z(null))},[y]),onTriggerLeave:a.useCallback(f=>{y(f)&&f.preventDefault()},[y]),pointerGraceTimerRef:R,onPointerGraceIntentChange:a.useCallback(f=>{X.current=f},[]),children:e.jsx(pe,{...ge,children:e.jsx(rn,{asChild:!0,trapped:c,onMountAutoFocus:j(i,f=>{var N;f.preventDefault(),(N=$.current)==null||N.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:e.jsx(Yt,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:g,onPointerDownOutside:m,onFocusOutside:o,onInteractOutside:x,onDismiss:v,children:e.jsx(on,{asChild:!0,...E,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:U,onCurrentTabStopIdChange:z,onEntryFocus:j(h,f=>{_.isUsingKeyboardRef.current||f.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(zt,{role:"menu","aria-orientation":"vertical","data-state":xt(p.open),"data-radix-menu-content":"",dir:_.dir,...D,...M,ref:A,style:{outline:"none",...M.style},onKeyDown:j(M.onKeyDown,f=>{const S=f.target.closest("[data-radix-menu-content]")===f.currentTarget,b=f.ctrlKey||f.altKey||f.metaKey,T=f.key.length===1;S&&(f.key==="Tab"&&f.preventDefault(),!b&&T&&l(f.key));const ve=$.current;if(f.target!==ve||!Nn.includes(f.key))return;f.preventDefault();const H=ce().filter(B=>!B.disabled).map(B=>B.ref.current);qe.includes(f.key)&&H.reverse(),Bn(H)}),onBlur:j(t.onBlur,f=>{f.currentTarget.contains(f.target)||(window.clearTimeout(O.current),F.current="")}),onPointerMove:j(t.onPointerMove,se(f=>{const N=f.target,S=K.current!==f.clientX;if(f.currentTarget.contains(N)&&S){const b=f.clientX>K.current?"right":"left";ie.current=b,K.current=f.clientX}}))})})})})})})});Qe.displayName=P;var An="MenuGroup",Ee=a.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(Y.div,{role:"group",...r,ref:s})});Ee.displayName=An;var On="MenuLabel",Ze=a.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(Y.div,{...r,ref:s})});Ze.displayName=On;var ue="MenuItem",Ge="menu.itemSelect",he=a.forwardRef((t,s)=>{const{disabled:n=!1,onSelect:r,...c}=t,i=a.useRef(null),d=oe(ue,t.__scopeMenu),u=Se(ue,t.__scopeMenu),h=re(s,i),g=a.useRef(!1),m=()=>{const o=i.current;if(!n&&o){const x=new CustomEvent(Ge,{bubbles:!0,cancelable:!0});o.addEventListener(Ge,v=>r==null?void 0:r(v),{once:!0}),Bt(o,x),x.defaultPrevented?g.current=!1:d.onClose()}};return e.jsx(Je,{...c,ref:h,disabled:n,onClick:j(t.onClick,m),onPointerDown:o=>{var x;(x=t.onPointerDown)==null||x.call(t,o),g.current=!0},onPointerUp:j(t.onPointerUp,o=>{var x;g.current||(x=o.currentTarget)==null||x.click()}),onKeyDown:j(t.onKeyDown,o=>{const x=u.searchRef.current!=="";n||x&&o.key===" "||be.includes(o.key)&&(o.currentTarget.click(),o.preventDefault())})})});he.displayName=ue;var Je=a.forwardRef((t,s)=>{const{__scopeMenu:n,disabled:r=!1,textValue:c,...i}=t,d=Se(ue,n),u=ze(n),h=a.useRef(null),g=re(s,h),[m,o]=a.useState(!1),[x,v]=a.useState("");return a.useEffect(()=>{const C=h.current;C&&v((C.textContent??"").trim())},[i.children]),e.jsx(ne.ItemSlot,{scope:n,disabled:r,textValue:c??x,children:e.jsx(an,{asChild:!0,...u,focusable:!r,children:e.jsx(Y.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:g,onPointerMove:j(t.onPointerMove,se(C=>{r?d.onItemLeave(C):(d.onItemEnter(C),C.defaultPrevented||C.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:j(t.onPointerLeave,se(C=>d.onItemLeave(C))),onFocus:j(t.onFocus,()=>o(!0)),onBlur:j(t.onBlur,()=>o(!1))})})})}),Fn="MenuCheckboxItem",et=a.forwardRef((t,s)=>{const{checked:n=!1,onCheckedChange:r,...c}=t;return e.jsx(at,{scope:t.__scopeMenu,checked:n,children:e.jsx(he,{role:"menuitemcheckbox","aria-checked":me(n)?"mixed":n,...c,ref:s,"data-state":Ie(n),onSelect:j(c.onSelect,()=>r==null?void 0:r(me(n)?!0:!n),{checkForDefaultPrevented:!1})})})});et.displayName=Fn;var tt="MenuRadioGroup",[Ln,Gn]=G(tt,{value:void 0,onValueChange:()=>{}}),nt=a.forwardRef((t,s)=>{const{value:n,onValueChange:r,...c}=t,i=we(r);return e.jsx(Ln,{scope:t.__scopeMenu,value:n,onValueChange:i,children:e.jsx(Ee,{...c,ref:s})})});nt.displayName=tt;var st="MenuRadioItem",rt=a.forwardRef((t,s)=>{const{value:n,...r}=t,c=Gn(st,t.__scopeMenu),i=n===c.value;return e.jsx(at,{scope:t.__scopeMenu,checked:i,children:e.jsx(he,{role:"menuitemradio","aria-checked":i,...r,ref:s,"data-state":Ie(i),onSelect:j(r.onSelect,()=>{var d;return(d=c.onValueChange)==null?void 0:d.call(c,n)},{checkForDefaultPrevented:!1})})})});rt.displayName=st;var Te="MenuItemIndicator",[at,Vn]=G(Te,{checked:!1}),ot=a.forwardRef((t,s)=>{const{__scopeMenu:n,forceMount:r,...c}=t,i=Vn(Te,n);return e.jsx(xe,{present:r||me(i.checked)||i.checked===!0,children:e.jsx(Y.span,{...c,ref:s,"data-state":Ie(i.checked)})})});ot.displayName=Te;var Un="MenuSeparator",ct=a.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(Y.div,{role:"separator","aria-orientation":"horizontal",...r,ref:s})});ct.displayName=Un;var $n="MenuArrow",it=a.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t,c=fe(n);return e.jsx(Xt,{...c,...r,ref:s})});it.displayName=$n;var Kn="MenuSub",[or,lt]=G(Kn),ee="MenuSubTrigger",dt=a.forwardRef((t,s)=>{const n=V(ee,t.__scopeMenu),r=oe(ee,t.__scopeMenu),c=lt(ee,t.__scopeMenu),i=Se(ee,t.__scopeMenu),d=a.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:h}=i,g={__scopeMenu:t.__scopeMenu},m=a.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return a.useEffect(()=>m,[m]),a.useEffect(()=>{const o=u.current;return()=>{window.clearTimeout(o),h(null)}},[u,h]),e.jsx(_e,{asChild:!0,...g,children:e.jsx(Je,{id:c.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":c.contentId,"data-state":xt(n.open),...t,ref:Ht(s,c.onTriggerChange),onClick:o=>{var x;(x=t.onClick)==null||x.call(t,o),!(t.disabled||o.defaultPrevented)&&(o.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:j(t.onPointerMove,se(o=>{i.onItemEnter(o),!o.defaultPrevented&&!t.disabled&&!n.open&&!d.current&&(i.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{n.onOpenChange(!0),m()},100))})),onPointerLeave:j(t.onPointerLeave,se(o=>{var v,C;m();const x=(v=n.content)==null?void 0:v.getBoundingClientRect();if(x){const M=(C=n.content)==null?void 0:C.dataset.side,p=M==="right",_=p?-5:5,D=x[p?"left":"right"],E=x[p?"right":"left"];i.onPointerGraceIntentChange({area:[{x:o.clientX+_,y:o.clientY},{x:D,y:x.top},{x:E,y:x.top},{x:E,y:x.bottom},{x:D,y:x.bottom}],side:M}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(o),o.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:j(t.onKeyDown,o=>{var v;const x=i.searchRef.current!=="";t.disabled||x&&o.key===" "||Mn[r.dir].includes(o.key)&&(n.onOpenChange(!0),(v=n.content)==null||v.focus(),o.preventDefault())})})})});dt.displayName=ee;var ut="MenuSubContent",mt=a.forwardRef((t,s)=>{const n=He(P,t.__scopeMenu),{forceMount:r=n.forceMount,...c}=t,i=V(P,t.__scopeMenu),d=oe(P,t.__scopeMenu),u=lt(ut,t.__scopeMenu),h=a.useRef(null),g=re(s,h);return e.jsx(ne.Provider,{scope:t.__scopeMenu,children:e.jsx(xe,{present:r||i.open,children:e.jsx(ne.Slot,{scope:t.__scopeMenu,children:e.jsx(Pe,{id:u.contentId,"aria-labelledby":u.triggerId,...c,ref:g,align:"start",side:d.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{var o;d.isUsingKeyboardRef.current&&((o=h.current)==null||o.focus()),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:j(t.onFocusOutside,m=>{m.target!==u.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:j(t.onEscapeKeyDown,m=>{d.onClose(),m.preventDefault()}),onKeyDown:j(t.onKeyDown,m=>{var v;const o=m.currentTarget.contains(m.target),x=bn[d.dir].includes(m.key);o&&x&&(i.onOpenChange(!1),(v=u.trigger)==null||v.focus(),m.preventDefault())})})})})})});mt.displayName=ut;function xt(t){return t?"open":"closed"}function me(t){return t==="indeterminate"}function Ie(t){return me(t)?"indeterminate":t?"checked":"unchecked"}function Bn(t){const s=document.activeElement;for(const n of t)if(n===s||(n.focus(),document.activeElement!==s))return}function qn(t,s){return t.map((n,r)=>t[(s+r)%t.length])}function Yn(t,s,n){const c=s.length>1&&Array.from(s).every(g=>g===s[0])?s[0]:s,i=n?t.indexOf(n):-1;let d=qn(t,Math.max(i,0));c.length===1&&(d=d.filter(g=>g!==n));const h=d.find(g=>g.toLowerCase().startsWith(c.toLowerCase()));return h!==n?h:void 0}function zn(t,s){const{x:n,y:r}=t;let c=!1;for(let i=0,d=s.length-1;i<s.length;d=i++){const u=s[i],h=s[d],g=u.x,m=u.y,o=h.x,x=h.y;m>r!=x>r&&n<(o-g)*(r-m)/(x-m)+g&&(c=!c)}return c}function Xn(t,s){if(!s)return!1;const n={x:t.clientX,y:t.clientY};return zn(n,s)}function se(t){return s=>s.pointerType==="mouse"?t(s):void 0}var Hn=Xe,Wn=_e,Qn=We,Zn=Qe,Jn=Ee,es=Ze,ts=he,ns=et,ss=nt,rs=rt,as=ot,os=ct,cs=it,is=dt,ls=mt,ke="ContextMenu",[ds,cr]=Ve(ke,[Ye]),w=Ye(),[us,ft]=ds(ke),ht=t=>{const{__scopeContextMenu:s,children:n,onOpenChange:r,dir:c,modal:i=!0}=t,[d,u]=a.useState(!1),h=w(s),g=we(r),m=a.useCallback(o=>{u(o),g(o)},[g]);return e.jsx(us,{scope:s,open:d,onOpenChange:m,modal:i,children:e.jsx(Hn,{...h,dir:c,open:d,onOpenChange:m,modal:i,children:n})})};ht.displayName=ke;var pt="ContextMenuTrigger",gt=a.forwardRef((t,s)=>{const{__scopeContextMenu:n,disabled:r=!1,...c}=t,i=ft(pt,n),d=w(n),u=a.useRef({x:0,y:0}),h=a.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...u.current})}),g=a.useRef(0),m=a.useCallback(()=>window.clearTimeout(g.current),[]),o=x=>{u.current={x:x.clientX,y:x.clientY},i.onOpenChange(!0)};return a.useEffect(()=>m,[m]),a.useEffect(()=>void(r&&m()),[r,m]),e.jsxs(e.Fragment,{children:[e.jsx(Wn,{...d,virtualRef:h}),e.jsx(Y.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...c,ref:s,style:{WebkitTouchCallout:"none",...t.style},onContextMenu:r?t.onContextMenu:j(t.onContextMenu,x=>{m(),o(x),x.preventDefault()}),onPointerDown:r?t.onPointerDown:j(t.onPointerDown,de(x=>{m(),g.current=window.setTimeout(()=>o(x),700)})),onPointerMove:r?t.onPointerMove:j(t.onPointerMove,de(m)),onPointerCancel:r?t.onPointerCancel:j(t.onPointerCancel,de(m)),onPointerUp:r?t.onPointerUp:j(t.onPointerUp,de(m))})]})});gt.displayName=pt;var ms="ContextMenuPortal",vt=t=>{const{__scopeContextMenu:s,...n}=t,r=w(s);return e.jsx(Qn,{...r,...n})};vt.displayName=ms;var Ct="ContextMenuContent",jt=a.forwardRef((t,s)=>{const{__scopeContextMenu:n,...r}=t,c=ft(Ct,n),i=w(n),d=a.useRef(!1);return e.jsx(Zn,{...i,...r,ref:s,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:u=>{var h;(h=t.onCloseAutoFocus)==null||h.call(t,u),!u.defaultPrevented&&d.current&&u.preventDefault(),d.current=!1},onInteractOutside:u=>{var h;(h=t.onInteractOutside)==null||h.call(t,u),!u.defaultPrevented&&!c.modal&&(d.current=!0)},style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jt.displayName=Ct;var xs="ContextMenuGroup",fs=a.forwardRef((t,s)=>{const{__scopeContextMenu:n,...r}=t,c=w(n);return e.jsx(Jn,{...c,...r,ref:s})});fs.displayName=xs;var hs="ContextMenuLabel",yt=a.forwardRef((t,s)=>{const{__scopeContextMenu:n,...r}=t,c=w(n);return e.jsx(es,{...c,...r,ref:s})});yt.displayName=hs;var ps="ContextMenuItem",Nt=a.forwardRef((t,s)=>{const{__scopeContextMenu:n,...r}=t,c=w(n);return e.jsx(ts,{...c,...r,ref:s})});Nt.displayName=ps;var gs="ContextMenuCheckboxItem",Mt=a.forwardRef((t,s)=>{const{__scopeContextMenu:n,...r}=t,c=w(n);return e.jsx(ns,{...c,...r,ref:s})});Mt.displayName=gs;var vs="ContextMenuRadioGroup",Cs=a.forwardRef((t,s)=>{const{__scopeContextMenu:n,...r}=t,c=w(n);return e.jsx(ss,{...c,...r,ref:s})});Cs.displayName=vs;var js="ContextMenuRadioItem",bt=a.forwardRef((t,s)=>{const{__scopeContextMenu:n,...r}=t,c=w(n);return e.jsx(rs,{...c,...r,ref:s})});bt.displayName=js;var ys="ContextMenuItemIndicator",wt=a.forwardRef((t,s)=>{const{__scopeContextMenu:n,...r}=t,c=w(n);return e.jsx(as,{...c,...r,ref:s})});wt.displayName=ys;var Ns="ContextMenuSeparator",_t=a.forwardRef((t,s)=>{const{__scopeContextMenu:n,...r}=t,c=w(n);return e.jsx(os,{...c,...r,ref:s})});_t.displayName=Ns;var Ms="ContextMenuArrow",bs=a.forwardRef((t,s)=>{const{__scopeContextMenu:n,...r}=t,c=w(n);return e.jsx(cs,{...c,...r,ref:s})});bs.displayName=Ms;var ws="ContextMenuSubTrigger",Rt=a.forwardRef((t,s)=>{const{__scopeContextMenu:n,...r}=t,c=w(n);return e.jsx(is,{...c,...r,ref:s})});Rt.displayName=ws;var _s="ContextMenuSubContent",St=a.forwardRef((t,s)=>{const{__scopeContextMenu:n,...r}=t,c=w(n);return e.jsx(ls,{...c,...r,ref:s,style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});St.displayName=_s;function de(t){return s=>s.pointerType!=="mouse"?t(s):void 0}var Rs=ht,Ss=gt,Ps=vt,Pt=jt,Et=yt,Tt=Nt,It=Mt,kt=bt,Dt=wt,At=_t,Ot=Rt,Ft=St;const Es=Rs,Ts=Ss,Is=a.forwardRef(({className:t,inset:s,children:n,...r},c)=>e.jsxs(Ot,{ref:c,className:L("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",s&&"pl-8",t),...r,children:[n,e.jsx(Be,{className:"ml-auto h-4 w-4"})]}));Is.displayName=Ot.displayName;const ks=a.forwardRef(({className:t,...s},n)=>e.jsx(Ft,{ref:n,className:L("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));ks.displayName=Ft.displayName;const Lt=a.forwardRef(({className:t,...s},n)=>e.jsx(Ps,{children:e.jsx(Pt,{ref:n,className:L("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}));Lt.displayName=Pt.displayName;const te=a.forwardRef(({className:t,inset:s,...n},r)=>e.jsx(Tt,{ref:r,className:L("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",t),...n}));te.displayName=Tt.displayName;const Ds=a.forwardRef(({className:t,children:s,checked:n,...r},c)=>e.jsxs(It,{ref:c,className:L("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Dt,{children:e.jsx(cn,{className:"h-4 w-4"})})}),s]}));Ds.displayName=It.displayName;const As=a.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(kt,{ref:r,className:L("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Dt,{children:e.jsx(fn,{className:"h-2 w-2 fill-current"})})}),s]}));As.displayName=kt.displayName;const Os=a.forwardRef(({className:t,inset:s,...n},r)=>e.jsx(Et,{ref:r,className:L("px-2 py-1.5 text-sm font-semibold text-foreground",s&&"pl-8",t),...n}));Os.displayName=Et.displayName;const Fs=a.forwardRef(({className:t,...s},n)=>e.jsx(At,{ref:n,className:L("-mx-1 my-1 h-px bg-border",t),...s}));Fs.displayName=At.displayName;const ir=()=>{const{user:t}=Wt(),[s,n]=a.useState([]),[r,c]=a.useState(!0),[i,d]=a.useState(null),[u,h]=a.useState(1),[g,m]=a.useState(1),[o,x]=a.useState({dateFrom:"",dateTo:"",quality:"",minVolume:"",maxVolume:""}),[v,C]=a.useState(!1),[M,p]=a.useState(null),[_,D]=a.useState(null),E=10,{elementRef:ce,isRefreshing:U,pullProgress:z,refreshIndicatorStyle:$}=Cn({onRefresh:async()=>{await O()},threshold:80}),A=jn({onLongPress:l=>{},threshold:500}),O=a.useCallback(async()=>{try{c(!0),d(null);const y=await Fe.Collections.list(E,(u-1)*E,"farmer_12345");n(y.items||[]),m(Math.ceil((y.total||0)/E))}catch(l){console.error("Error fetching collections:",l),d("Failed to load collection history")}finally{c(!1)}},[u,o]);a.useEffect(()=>{t&&O()},[t,u,o,O]);const F=a.useMemo(()=>s.filter(l=>!(o.dateFrom&&new Date(l.timestamp)<new Date(o.dateFrom)||o.dateTo&&new Date(l.timestamp)>new Date(o.dateTo)||o.quality&&l.quality_grade!==o.quality||o.minVolume&&l.liters<parseFloat(o.minVolume)||o.maxVolume&&l.liters>parseFloat(o.maxVolume))),[s,o]),R=(l,y)=>{x(f=>({...f,[l]:y})),h(1)},X=()=>{x({dateFrom:"",dateTo:"",quality:"",minVolume:"",maxVolume:""}),h(1)},ie=()=>{const l=["Date","Volume (L)","Quality Grade","Temperature (°C)","Validation Code"],y=F.map(T=>[new Date(T.timestamp).toLocaleDateString(),T.liters,T.quality_grade,T.temperature,T.validation_code]),f=[l.join(","),...y.map(T=>T.join(","))].join(`
`),N=new Blob([f],{type:"text/csv;charset=utf-8;"}),S=URL.createObjectURL(N),b=document.createElement("a");b.setAttribute("href",S),b.setAttribute("download",`collections-${new Date().toISOString().split("T")[0]}.csv`),b.style.visibility="hidden",document.body.appendChild(b),b.click(),document.body.removeChild(b)},K=async l=>{try{const y=await Fe.Collections.downloadReceipt(l),f=window.URL.createObjectURL(y),N=document.createElement("a");N.href=f,N.download=`collection-receipt-${l}.pdf`,document.body.appendChild(N),N.click(),window.URL.revokeObjectURL(f),document.body.removeChild(N)}catch(y){console.error("Error downloading receipt:",y),alert("Failed to download receipt. Please try again.")}},pe=l=>{console.log("Dispute collection:",l.id),alert(`Dispute collection ${l.id.substring(0,8)}...`)},ge=l=>{console.log("Share collection:",l.id),alert(`Share collection ${l.id.substring(0,8)}...`)};return r&&!U?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),e.jsx("p",{className:"text-gray-600",children:"Loading collections..."})]})}):i&&!U?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs(Z,{className:"w-full max-w-md",children:[e.jsx(je,{children:e.jsxs(ye,{className:"text-red-600 flex items-center gap-2",children:[e.jsx(Ne,{className:"h-5 w-5"}),"Error Loading Collections"]})}),e.jsxs(J,{children:[e.jsx("p",{className:"text-gray-600 mb-4",children:i}),e.jsx(I,{onClick:()=>window.location.reload(),className:"w-full",children:"Try Again"})]})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 relative",ref:ce,children:[e.jsxs("div",{style:$,className:"flex flex-col items-center",children:[e.jsx("div",{className:"bg-white rounded-full p-2 shadow-lg",children:e.jsx(ln,{className:`h-6 w-6 text-green-600 ${U?"animate-spin":""}`,style:{transform:`rotate(${z*180}deg)`}})}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:U?"Refreshing...":z>=1?"Release to refresh":"Pull to refresh"})]}),e.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Collection History"}),e.jsx("p",{className:"text-gray-600",children:"View your milk collection records and history"})]}),e.jsxs(Z,{className:"mb-6",children:[e.jsx(je,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs(ye,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ce,{className:"h-5 w-5 text-green-600"}),"Collections"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(I,{variant:"outline",onClick:()=>C(!v),className:"flex items-center gap-2",children:[e.jsx(pn,{className:"h-4 w-4"}),v?"Hide Filters":"Show Filters"]}),e.jsxs(I,{variant:"outline",onClick:ie,className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4"}),"Export CSV"]})]})]})}),e.jsxs(J,{children:[v&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"dateFrom",className:"text-sm font-medium",children:"From Date"}),e.jsx(le,{id:"dateFrom",type:"date",value:o.dateFrom,onChange:l=>R("dateFrom",l.target.value)})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"dateTo",className:"text-sm font-medium",children:"To Date"}),e.jsx(le,{id:"dateTo",type:"date",value:o.dateTo,onChange:l=>R("dateTo",l.target.value)})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"quality",className:"text-sm font-medium",children:"Quality Grade"}),e.jsxs("select",{id:"quality",className:"w-full rounded-md border border-gray-300 bg-white py-2 px-3 text-sm",value:o.quality,onChange:l=>R("quality",l.target.value),children:[e.jsx("option",{value:"",children:"All Grades"}),e.jsx("option",{value:"A",children:"Grade A"}),e.jsx("option",{value:"B",children:"Grade B"}),e.jsx("option",{value:"C",children:"Grade C"})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"minVolume",className:"text-sm font-medium",children:"Min Volume (L)"}),e.jsx(le,{id:"minVolume",type:"number",placeholder:"0",value:o.minVolume,onChange:l=>R("minVolume",l.target.value)})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"maxVolume",className:"text-sm font-medium",children:"Max Volume (L)"}),e.jsx(le,{id:"maxVolume",type:"number",placeholder:"1000",value:o.maxVolume,onChange:l=>R("maxVolume",l.target.value)})]})]}),Object.values(o).some(l=>l!=="")&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.dateFrom&&e.jsxs(Q,{variant:"secondary",className:"flex items-center gap-1",children:["From: ",new Date(o.dateFrom).toLocaleDateString(),e.jsx("button",{onClick:()=>R("dateFrom",""),className:"ml-1 hover:bg-gray-200 rounded-full p-0.5",children:"×"})]}),o.dateTo&&e.jsxs(Q,{variant:"secondary",className:"flex items-center gap-1",children:["To: ",new Date(o.dateTo).toLocaleDateString(),e.jsx("button",{onClick:()=>R("dateTo",""),className:"ml-1 hover:bg-gray-200 rounded-full p-0.5",children:"×"})]}),o.quality&&e.jsxs(Q,{variant:"secondary",className:"flex items-center gap-1",children:["Grade: ",o.quality,e.jsx("button",{onClick:()=>R("quality",""),className:"ml-1 hover:bg-gray-200 rounded-full p-0.5",children:"×"})]}),(o.minVolume||o.maxVolume)&&e.jsxs(Q,{variant:"secondary",className:"flex items-center gap-1",children:["Volume: ",o.minVolume||"0"," - ",o.maxVolume||"∞","L",e.jsx("button",{onClick:()=>{R("minVolume",""),R("maxVolume","")},className:"ml-1 hover:bg-gray-200 rounded-full p-0.5",children:"×"})]})]}),e.jsx(I,{variant:"ghost",onClick:X,className:"text-sm",children:"Clear All"})]})]})]}),F.length===0?e.jsx(Z,{children:e.jsxs(J,{className:"py-12 text-center",children:[e.jsx(Ce,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No collections found"}),e.jsx("p",{className:"text-gray-500",children:Object.values(o).some(l=>l!=="")?"No collections match your filters. Try adjusting your search criteria.":"You haven't made any milk collections yet."})]})}):e.jsxs("div",{className:"space-y-4",children:[F.map(l=>e.jsxs(Es,{children:[e.jsx(Ts,{asChild:!0,children:e.jsx(Z,{className:"hover:shadow-md transition-shadow relative",onTouchStart:y=>{A.touchStart(y),D(l)},onTouchEnd:A.touchEnd,onMouseDown:y=>{A.mouseDown(y),D(l)},onMouseUp:A.mouseUp,onClick:A.click,onContextMenu:A.contextMenu,children:e.jsxs(J,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(dn,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[l.liters,"L Milk Collection"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-2 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx("span",{children:un(new Date(l.timestamp),"MMM d, yyyy h:mm a")})]}),l.gps_latitude&&l.gps_longitude&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($e,{className:"h-4 w-4"}),e.jsxs("span",{children:[l.gps_latitude.toFixed(4),", ",l.gps_longitude.toFixed(4)]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:items-end gap-2",children:[e.jsxs(Q,{className:l.quality_grade==="A"?"bg-green-100 text-green-800":l.quality_grade==="B"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800",children:["Grade ",l.quality_grade]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Code: ",l.validation_code]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mt-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Temperature"}),e.jsxs("div",{className:"font-medium",children:[l.temperature,"°C"]})]}),l.fat_content&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Fat Content"}),e.jsxs("div",{className:"font-medium",children:[l.fat_content,"%"]})]}),l.protein_content&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Protein Content"}),e.jsxs("div",{className:"font-medium",children:[l.protein_content,"%"]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(I,{variant:"outline",size:"sm",onClick:()=>p(l),className:"flex items-center gap-1",children:[e.jsx(Le,{className:"h-4 w-4"}),"View Details"]})})]})})}),e.jsxs(Lt,{className:"w-48",children:[e.jsxs(te,{onClick:()=>p(l),className:"flex items-center gap-2",children:[e.jsx(Le,{className:"h-4 w-4"}),"View Details"]}),e.jsxs(te,{onClick:()=>pe(l),className:"flex items-center gap-2",children:[e.jsx(mn,{className:"h-4 w-4"}),"Dispute Collection"]}),e.jsxs(te,{onClick:()=>ge(l),className:"flex items-center gap-2",children:[e.jsx(gn,{className:"h-4 w-4"}),"Share"]}),e.jsxs(te,{onClick:()=>K(l.id),className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4"}),"Download Receipt"]})]})]},l.id)),g>1&&e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsxs(I,{variant:"outline",onClick:()=>h(l=>Math.max(l-1,1)),disabled:u===1,className:"flex items-center gap-2",children:[e.jsx(xn,{className:"h-4 w-4"}),"Previous"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",u," of ",g]}),e.jsxs(I,{variant:"outline",onClick:()=>h(l=>Math.min(l+1,g)),disabled:u===g,className:"flex items-center gap-2",children:["Next",e.jsx(Be,{className:"h-4 w-4"})]})]}),M&&e.jsx(vn,{collection:M,onClose:()=>p(null),onDownloadReceipt:()=>K(M.id)})]})]})]})};export{ir as default};
