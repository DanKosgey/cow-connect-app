import{e as S,r as m,j as e,z as f}from"./index-C6fZJ48e.js";import{C as t,a as r,b as i,d,c as p}from"./card-D80GW863.js";import{B as o}from"./badge-Bb0m1QXe.js";import{B as l}from"./button-CjSaidot.js";import{A as M}from"./AdminSidebar-BlxC4_lF.js";import{S as _,m as B}from"./avatar-BmR-I4hu.js";import{P as L}from"./ApiService-bGFnA_mg.js";import{C as A}from"./clock-B7WW80Vs.js";import{C as N}from"./circle-check-big-CorUa3eH.js";import{C as u}from"./circle-x-rQriW1OR.js";import{D as g}from"./dollar-sign-ZMqYMnDH.js";import{C as E}from"./credit-card-DzBczH5i.js";import{S as z}from"./smartphone-BOKbuaXO.js";import"./sheet-hMc6SWc2.js";import"./index-CrhFojRB.js";import"./Combination-D2BFsl2-.js";import"./bot-CkBzqiOK.js";import"./chart-column-hY8aCTYj.js";import"./input-ZoKW3yZy.js";import"./separator-DKBG6nYm.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=S("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),ae=()=>{const[n,b]=m.useState([]),[v,h]=m.useState(!0),[j,w]=m.useState(null);m.useEffect(()=>{(async()=>{try{h(!0);const a=await L.list(100,0);b(a),f.info("Payments data fetched successfully")}catch(a){f.error("Error fetching payments data",a),w("Failed to load payments data")}finally{h(!1)}})()},[]);const c=n.filter(s=>s.status==="pending"),x=n.filter(s=>s.status==="paid"),P=n.filter(s=>s.status==="failed"),k=c.reduce((s,a)=>s+a.total_amount,0),C=x.reduce((s,a)=>s+a.total_amount,0),y=s=>{switch(s){case"mpesa":return e.jsx(z,{className:"h-4 w-4"});case"bank":return e.jsx(K,{className:"h-4 w-4"});case"paystack":return e.jsx(E,{className:"h-4 w-4"});default:return e.jsx(g,{className:"h-4 w-4"})}};return v?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-dairy-blue"})}):j?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsxs("div",{className:"text-red-500 text-center",children:[e.jsxs("p",{children:["Error loading payments: ",j]}),e.jsx(l,{onClick:()=>window.location.reload(),className:"mt-4",children:"Retry"})]})}):e.jsx(_,{children:e.jsxs("div",{className:"min-h-screen flex w-full bg-dairy-50",children:[e.jsx(M,{}),e.jsxs("main",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(B,{className:"border border-dairy-200"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-dairy-900",children:"Payment Management"}),e.jsx("p",{className:"text-dairy-600",children:"Process and track farmer payments"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(l,{variant:"outline",className:"border-dairy-300",children:"Generate Report"}),e.jsx(l,{className:"bg-dairy-green hover:bg-dairy-green/90",children:"Process All Pending"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs(t,{className:"border-dairy-200",children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-dairy-700",children:"Pending Payments"}),e.jsx(A,{className:"h-4 w-4 text-orange-500"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold text-dairy-900",children:c.length}),e.jsxs("p",{className:"text-xs text-dairy-600",children:["KSh ",k.toLocaleString()," total"]})]})]}),e.jsxs(t,{className:"border-dairy-200",children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-dairy-700",children:"Completed"}),e.jsx(N,{className:"h-4 w-4 text-dairy-green"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold text-dairy-900",children:x.length}),e.jsxs("p",{className:"text-xs text-dairy-600",children:["KSh ",C.toLocaleString()," paid"]})]})]}),e.jsxs(t,{className:"border-dairy-200",children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-dairy-700",children:"Failed"}),e.jsx(u,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold text-dairy-900",children:P.length}),e.jsx("p",{className:"text-xs text-dairy-600",children:"Require attention"})]})]}),e.jsxs(t,{className:"border-dairy-200",children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium text-dairy-700",children:"Total Payments"}),e.jsx(g,{className:"h-4 w-4 text-dairy-blue"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold text-dairy-900",children:n.length}),e.jsx("p",{className:"text-xs text-dairy-600",children:"All time"})]})]})]}),e.jsxs(t,{className:"border-dairy-200 mb-8",children:[e.jsxs(r,{children:[e.jsxs(i,{className:"text-dairy-900 flex items-center justify-between",children:["Pending Payments",e.jsxs(o,{variant:"secondary",className:"bg-orange-100 text-orange-700",children:[c.length," pending"]})]}),e.jsx(p,{children:"Payments awaiting processing"})]}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:c.map(s=>e.jsxs("div",{className:"border border-dairy-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:y(s.paymentMethod)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-dairy-900",children:s.farmerName}),e.jsxs("p",{className:"text-sm text-dairy-600",children:[s.period_month," â€¢ ",s.total_liters,"L @ KSh ",s.rate_per_liter,"/L"]}),e.jsx("p",{className:"text-xs text-dairy-500",children:s.payment_method==="mpesa"?`M-Pesa: ${s.phone_number}`:s.payment_method==="bank"?`Bank: ${s.account_number}`:"Paystack Payment"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-dairy-900",children:["KSh ",s.total_amount.toLocaleString()]}),e.jsx(o,{variant:"outline",className:"border-orange-300 text-orange-700",children:"Pending"})]})]}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsxs(l,{size:"sm",className:"bg-dairy-green hover:bg-dairy-green/90",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Process Payment"]}),e.jsxs(l,{size:"sm",variant:"outline",className:"border-red-300 text-red-700",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]},s.id))})})]}),e.jsxs(t,{className:"border-dairy-200",children:[e.jsxs(r,{children:[e.jsx(i,{className:"text-dairy-900",children:"Recent Completed Payments"}),e.jsx(p,{children:"Successfully processed payments"})]}),e.jsx(d,{children:e.jsx("div",{className:"space-y-3",children:x.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-dairy-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-dairy-green/10 rounded-full flex items-center justify-center",children:y(s.paymentMethod)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-dairy-900",children:s.farmerName}),e.jsx("p",{className:"text-sm text-dairy-600",children:s.period_month})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-dairy-900",children:["KSh ",s.total_amount.toLocaleString()]}),e.jsx(o,{className:"bg-dairy-green",children:"Paid"})]})]},s.id))})})]})]})]})})};export{ae as default};
