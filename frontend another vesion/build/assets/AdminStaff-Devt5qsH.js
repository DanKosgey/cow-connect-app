import{e as v,r,j as e,b as M,U as f,z as E}from"./index-C6fZJ48e.js";import{C as c,a as o,b as m,d as n,c as U}from"./card-D80GW863.js";import{B as t}from"./badge-Bb0m1QXe.js";import{B as d}from"./button-CjSaidot.js";import{I as B}from"./input-ZoKW3yZy.js";import{S as A,a as I,b as R,c as D,d as i}from"./select-CiyqlXTk.js";import{A as V}from"./AdminSidebar-BlxC4_lF.js";import{S as z,m as Z}from"./avatar-BmR-I4hu.js";import{W as G,a as q}from"./wifi-CU9CpL8x.js";import{P as H}from"./plus-B6s2IIiO.js";import{S as W}from"./search-CMvfZT_q.js";import{T as J}from"./trash-2-BFdGnQiG.js";import"./index-BdQq_4o_.js";import"./index-Bmq6tP-i.js";import"./Combination-D2BFsl2-.js";import"./index-wh3HXzvH.js";import"./check-wjAQzcvr.js";import"./sheet-hMc6SWc2.js";import"./index-CrhFojRB.js";import"./bot-CkBzqiOK.js";import"./dollar-sign-ZMqYMnDH.js";import"./chart-column-hY8aCTYj.js";import"./separator-DKBG6nYm.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=v("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=v("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=v("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),ge=()=>{const[l,k]=r.useState([]),[u,b]=r.useState([]),[F,S]=r.useState(!0),[w,O]=r.useState(null),[_,C]=r.useState("connecting"),[x,y]=r.useState(""),[h,p]=r.useState("all"),[j,N]=r.useState("all");r.useEffect(()=>{(async()=>{try{S(!0);const a=[{id:"1",name:"John Smith",phone:"+254712345678",email:"john.smith@dairychain.com",role:"FIELD_AGENT",is_active:!0,last_active_at:new Date().toISOString(),assigned_routes:[],created_at:"2023-01-15T10:30:00Z"},{id:"2",name:"Sarah Johnson",phone:"+254723456789",email:"sarah.johnson@dairychain.com",role:"SUPERVISOR",is_active:!0,last_active_at:new Date().toISOString(),assigned_routes:[],created_at:"2023-02-20T14:15:00Z"},{id:"3",name:"Michael Brown",phone:"+254734567890",email:"michael.brown@dairychain.com",role:"FIELD_AGENT",is_active:!1,last_active_at:"2023-10-15T09:20:00Z",assigned_routes:[],created_at:"2023-03-10T11:45:00Z"},{id:"4",name:"Emily Davis",phone:"+254745678901",email:"emily.davis@dairychain.com",role:"PROCESSOR",is_active:!0,last_active_at:new Date().toISOString(),assigned_routes:[],created_at:"2023-04-05T16:30:00Z"},{id:"5",name:"David Wilson",phone:"+254756789012",email:"david.wilson@dairychain.com",role:"ADMIN",is_active:!0,last_active_at:new Date().toISOString(),assigned_routes:[],created_at:"2023-05-12T08:15:00Z"}];k(a),b(a),C("connected"),E.info("Staff data fetched successfully")}catch(a){E.error("Error fetching staff data",a),O("Failed to load staff data"),C("disconnected")}finally{S(!1)}})()},[]),r.useEffect(()=>{let s=[...l];if(x){const a=x.toLowerCase();s=s.filter(g=>g.name.toLowerCase().includes(a)||g.email.toLowerCase().includes(a)||g.phone.includes(a))}h!=="all"&&(s=s.filter(a=>a.role===h)),j!=="all"&&(s=s.filter(a=>j==="active"?a.is_active:!a.is_active)),b(s)},[l,x,h,j]);const P=s=>{switch(s){case"FIELD_AGENT":return e.jsx(t,{className:"bg-blue-100 text-blue-800 border-blue-200",children:"Field Agent"});case"SUPERVISOR":return e.jsx(t,{className:"bg-purple-100 text-purple-800 border-purple-200",children:"Supervisor"});case"PROCESSOR":return e.jsx(t,{className:"bg-green-100 text-green-800 border-green-200",children:"Processor"});case"ADMIN":return e.jsx(t,{className:"bg-orange-100 text-orange-800 border-orange-200",children:"Admin"});default:return e.jsx(t,{className:"bg-gray-100 text-gray-800 border-gray-200",children:s})}},L=s=>s?e.jsxs(t,{className:"bg-green-100 text-green-800 border-green-200",children:[e.jsx(T,{className:"h-3 w-3 mr-1"}),"Active"]}):e.jsxs(t,{className:"bg-red-100 text-red-800 border-red-200",children:[e.jsx($,{className:"h-3 w-3 mr-1"}),"Inactive"]});return F?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-dairy-blue"})}):w?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsxs("div",{className:"text-red-500 text-center",children:[e.jsxs("p",{children:["Error loading staff: ",w]}),e.jsx(d,{onClick:()=>window.location.reload(),className:"mt-4",children:"Retry"})]})}):e.jsx(z,{children:e.jsxs("div",{className:"min-h-screen flex w-full bg-dairy-50",children:[e.jsx(V,{}),e.jsxs("main",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Z,{className:"border border-dairy-200"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-dairy-900",children:"Staff Management"}),e.jsx("p",{className:"text-dairy-600",children:"Manage and monitor dairy collection staff"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(t,{className:`${_==="connected"?"bg-green-100 text-green-700 border-green-200":"bg-red-100 text-red-700 border-red-200"}`,children:_==="connected"?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"h-4 w-4 mr-1"}),"Connected"]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"h-4 w-4 mr-1"}),"Disconnected"]})}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(d,{className:"bg-dairy-blue hover:bg-dairy-blue/90",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Staff"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs(c,{className:"border-dairy-200",children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium text-dairy-700",children:"Total Staff"}),e.jsx(M,{className:"h-4 w-4 text-dairy-green"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold text-dairy-900",children:l.length}),e.jsx("p",{className:"text-xs text-dairy-600",children:"All registered staff"})]})]}),e.jsxs(c,{className:"border-dairy-200",children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium text-dairy-700",children:"Active Staff"}),e.jsx(T,{className:"h-4 w-4 text-dairy-blue"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold text-dairy-900",children:l.filter(s=>s.is_active).length}),e.jsx("p",{className:"text-xs text-dairy-600",children:"Currently working"})]})]}),e.jsxs(c,{className:"border-dairy-200",children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium text-dairy-700",children:"Field Agents"}),e.jsx(f,{className:"h-4 w-4 text-dairy-amber"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold text-dairy-900",children:l.filter(s=>s.role==="FIELD_AGENT").length}),e.jsx("p",{className:"text-xs text-dairy-600",children:"Collection staff"})]})]}),e.jsxs(c,{className:"border-dairy-200",children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium text-dairy-700",children:"Supervisors"}),e.jsx(f,{className:"h-4 w-4 text-dairy-purple"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold text-dairy-900",children:l.filter(s=>s.role==="SUPERVISOR").length}),e.jsx("p",{className:"text-xs text-dairy-600",children:"Management staff"})]})]})]}),e.jsx(c,{className:"border-dairy-200 mb-6",children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-dairy-400 h-4 w-4"}),e.jsx(B,{type:"text",placeholder:"Search staff...",className:"pl-10",value:x,onChange:s=>y(s.target.value)})]}),e.jsxs(A,{value:h,onValueChange:p,children:[e.jsx(I,{children:e.jsx(R,{placeholder:"Role"})}),e.jsxs(D,{children:[e.jsx(i,{value:"all",children:"All Roles"}),e.jsx(i,{value:"FIELD_AGENT",children:"Field Agent"}),e.jsx(i,{value:"SUPERVISOR",children:"Supervisor"}),e.jsx(i,{value:"PROCESSOR",children:"Processor"}),e.jsx(i,{value:"ADMIN",children:"Admin"})]})]}),e.jsxs(A,{value:j,onValueChange:N,children:[e.jsx(I,{children:e.jsx(R,{placeholder:"Status"})}),e.jsxs(D,{children:[e.jsx(i,{value:"all",children:"All Statuses"}),e.jsx(i,{value:"active",children:"Active"}),e.jsx(i,{value:"inactive",children:"Inactive"})]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(d,{variant:"outline",className:"border-dairy-300",onClick:()=>{y(""),p("all"),N("all")},children:"Clear Filters"})})]})})}),e.jsxs(c,{className:"border-dairy-200",children:[e.jsxs(o,{children:[e.jsx(m,{className:"text-dairy-900",children:"Staff Records"}),e.jsxs(U,{children:[u.length," staff members found"]})]}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[u.map(s=>e.jsx("div",{className:"border border-dairy-200 rounded-lg p-4 hover:bg-dairy-50 transition-colors",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-dairy-blue/10 rounded-full flex items-center justify-center",children:e.jsx(f,{className:"h-5 w-5 text-dairy-blue"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-dairy-900",children:s.name}),e.jsx("p",{className:"text-sm text-dairy-600",children:s.email})]})]}),P(s.role)]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"text-sm text-dairy-700",children:[e.jsxs("p",{children:["Phone: ",s.phone]}),e.jsxs("p",{className:"mt-1",children:["Joined: ",new Date(s.created_at).toLocaleDateString()]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center space-x-2",children:L(s.is_active)}),e.jsxs("div",{className:"text-sm text-dairy-700",children:["Last Active: ",s.last_active_at?new Date(s.last_active_at).toLocaleDateString():"Never"]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsxs(d,{size:"sm",variant:"outline",className:"border-dairy-300",children:[e.jsx(X,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs(d,{size:"sm",variant:"outline",className:"border-dairy-300",children:[e.jsx(J,{className:"h-4 w-4 mr-1"}),"Remove"]})]})]})},s.id)),u.length===0&&e.jsxs("div",{className:"text-center py-8 text-dairy-600",children:[e.jsx(f,{className:"h-12 w-12 mx-auto text-dairy-300 mb-2"}),e.jsx("p",{children:"No staff members found matching your filters"}),e.jsx(d,{variant:"outline",className:"mt-2 border-dairy-300",onClick:()=>{y(""),p("all"),N("all")},children:"Clear Filters"})]})]})})]})]})]})})};export{ge as default};
