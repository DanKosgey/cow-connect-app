import{r as a}from"./index-C6fZJ48e.js";const C=(c={})=>{const[r,o]=a.useState(null),[d,s]=a.useState(null),[i,u]=a.useState(!1),[g,l]=a.useState(null),n={...{enableHighAccuracy:!0,timeout:15e3,maximumAge:6e4},...c},S=a.useCallback(async()=>{if("permissions"in navigator)try{const t=await navigator.permissions.query({name:"geolocation"});l(t.state),t.onchange=()=>{l(t.state)}}catch(t){console.warn("Could not check geolocation permission status:",t)}},[]),h=a.useCallback(()=>{if(!navigator.geolocation){s({code:0,message:"Geolocation is not supported by this browser."});return}u(!0),s(null),navigator.geolocation.getCurrentPosition(t=>{o({latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,altitude:t.coords.altitude,altitudeAccuracy:t.coords.altitudeAccuracy,heading:t.coords.heading,speed:t.coords.speed,timestamp:t.timestamp}),u(!1)},t=>{s({code:t.code,message:t.message}),u(!1)},n)},[n]),y=a.useCallback(()=>navigator.geolocation?navigator.geolocation.watchPosition(e=>{o({latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy,altitude:e.coords.altitude,altitudeAccuracy:e.coords.altitudeAccuracy,heading:e.coords.heading,speed:e.coords.speed,timestamp:e.timestamp})},e=>{s({code:e.code,message:e.message})},n):(s({code:0,message:"Geolocation is not supported by this browser."}),null),[n]),b=a.useCallback(t=>{t!==null&&navigator.geolocation.clearWatch(t)},[]);return a.useEffect(()=>{S(),h()},[h,S]),{location:r,error:d,loading:i,getLocation:h,watchPosition:y,clearWatch:b,permissionState:g}},w=(c,r,o=Date.now())=>{const d=Math.abs(c).toString().replace(".","").substring(0,6),s=Math.abs(r).toString().replace(".","").substring(0,6),i=new Date(o),u=i.getDate().toString().padStart(2,"0"),g=i.getHours().toString().padStart(2,"0"),l=i.getMinutes().toString().padStart(2,"0"),m=`GPS${d}${s}${u}${g}${l}`,n=f(m);return`${m}${n}`},f=c=>{let r=0;for(let o=0;o<c.length;o++)r+=c.charCodeAt(o);return r%10};export{w as g,C as u};
