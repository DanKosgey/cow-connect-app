const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DYSULANo.js","assets/PieChart-qLQrvWxl.js","assets/index-C6fZJ48e.js","assets/index-Bojq63D2.css","assets/CartesianGrid-BVLrOhPa.js"])))=>i.map(i=>d[i]);
import{e as ue,r,z as A,j as e,c as be,_ as z,M as I,X as ye,U as Ne,L as ie,a as ve,W as we,T as ke}from"./index-C6fZJ48e.js";import{C as N,a as v,b as w,c as F,d as k}from"./card-D80GW863.js";import{B as D}from"./badge-Bb0m1QXe.js";import{B as M}from"./button-CjSaidot.js";import{P as te}from"./progress-J4JJxqa_.js";import{A as G,b as V,a as K}from"./alert-Civ_HrAB.js";import{a as O}from"./ApiService-bGFnA_mg.js";import{u as Se}from"./useWebSocket-j9kM2P_4.js";import{T as De}from"./textarea-CnB4NpWf.js";import{I as Ce}from"./input-ZoKW3yZy.js";import{L as oe}from"./label-Cb1HMnpx.js";import{S as Le}from"./SkeletonLoader-CbxjZ_Nk.js";import{T as W}from"./trending-up-DypWr_bi.js";import{B as Me,C as Fe,a as Pe,L as Ee,b as Te,p as _e,c as Ae,d as Ie}from"./index-BYOAP1dX.js";import{S as Re,a as $e,b as Oe,c as ze,d as se}from"./select-CiyqlXTk.js";import{S as qe,a as Be,b as He,H as We,c as Ue}from"./sheet-hMc6SWc2.js";import{D as Q}from"./dollar-sign-ZMqYMnDH.js";import{C as le}from"./chart-column-hY8aCTYj.js";import{F as Ye}from"./file-text-BWfQSXbE.js";import{B as Ge}from"./bell-BZ8cL21X.js";import{C as re}from"./circle-check-big-CorUa3eH.js";import{C as ae}from"./clock-B7WW80Vs.js";import{C as de}from"./calendar-B8DrZPNE.js";import{M as me}from"./map-pin-B94T8gzc.js";import{D as xe}from"./download-DAyV_9mL.js";import{C as he}from"./circle-alert-B7BDXU-i.js";import{B as Ve}from"./bot-CkBzqiOK.js";import"./index-BdQq_4o_.js";import"./index-Bmq6tP-i.js";import"./Combination-D2BFsl2-.js";import"./index-wh3HXzvH.js";import"./check-wjAQzcvr.js";import"./index-CrhFojRB.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=ue("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Xe=()=>{const[t,c]=r.useState([{id:"1",text:"Hello! I'm your AI farming assistant powered by advanced agricultural intelligence. I can help you with dairy farming questions, milk production optimization, herd management, feed strategies, and personalized recommendations based on your farm data. What would you like to know?",sender:"ai",timestamp:new Date,type:"chat"}]),[m,a]=r.useState([{id:"1",title:"Weekly Production Summary",content:"Your milk production has increased by 15% this week compared to last week. The average quality grade remains at A with consistent fat content.",type:"weekly",timestamp:new Date(Date.now()-2*24*60*60*1e3)},{id:"2",title:"Feed Optimization Recommendation",content:"Based on current milk production patterns, consider increasing protein content in evening feed by 5% to optimize morning milk yield.",type:"recommendation",timestamp:new Date(Date.now()-1*24*60*60*1e3)},{id:"3",title:"Weather Impact Alert",content:"Upcoming temperature drop may affect milk production. Ensure adequate shelter and consider adjusting feeding schedule.",type:"anomaly",timestamp:new Date}]),[l,o]=r.useState(""),[f,b]=r.useState(!1),[j,h]=r.useState("chat"),[p,S]=r.useState([]);r.useRef(null),r.useEffect(()=>(A.debug("FarmAI component mounted"),S([{type:"production",title:"Milk Production Optimization",description:"Optimal milking time adjustment suggested: Switch to 4-hour intervals to increase yield by 8%",priority:"medium",timestamp:new Date},{type:"production",title:"Feed Mix Optimization",description:"AI suggests increasing protein content by 2.5% to optimize milk fat content",priority:"medium",timestamp:new Date},{type:"health",title:"Early Health Alert",description:"AI detected potential respiratory patterns in Barn 2, Section C. Veterinary check recommended.",priority:"high",timestamp:new Date},{type:"health",title:"Herd Wellness Update",description:"Automated health monitoring shows improved vitals after recent feed adjustments",priority:"low",timestamp:new Date},{type:"efficiency",title:"Water Usage Optimization",description:"Smart sensors indicate 15% excess water usage in Section B. Checking for leaks advised.",priority:"medium",timestamp:new Date},{type:"efficiency",title:"Energy Efficiency Alert",description:"Night-time cooling systems running longer than optimal. Potential savings of 12% identified.",priority:"medium",timestamp:new Date},{type:"maintenance",title:"Preventive Maintenance Alert",description:"Milking system #3 showing early signs of wear. Schedule maintenance within 5 days.",priority:"medium",timestamp:new Date},{type:"maintenance",title:"Equipment Performance Update",description:"Feed distribution system efficiency decreased by 5%. Calibration recommended.",priority:"low",timestamp:new Date}]),()=>{A.debug("FarmAI component unmounted")}),[]);const d=s=>{switch(s){case"high":return"destructive";case"medium":return"secondary";case"low":return"outline";default:return"default"}};return e.jsx("div",{className:"p-6 space-y-6 bg-gradient-to-b from-green-950/10 to-green-900/5 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-green-950 dark:text-green-50 mb-8",children:"Farm Intelligence Center"}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(N,{className:"border-green-900/20 shadow-lg hover:shadow-xl transition-shadow duration-200 backdrop-blur-sm bg-white/50 dark:bg-green-950/50",children:[e.jsxs(v,{children:[e.jsxs(w,{className:"flex items-center gap-2 text-xl text-green-950 dark:text-green-50",children:["Production Insights",e.jsx(D,{className:"bg-green-900 text-white",children:"AI-Optimized"})]}),e.jsx(F,{className:"text-green-800 dark:text-green-200",children:"Smart production recommendations"})]}),e.jsx(k,{children:p.filter(s=>s.type==="production").map((s,i)=>e.jsxs(G,{className:"mb-4 border-l-4 border-green-700 bg-green-50/50 dark:bg-green-900/50",children:[e.jsxs(V,{className:"flex items-center gap-2 text-green-900 dark:text-green-50 font-semibold",children:[s.title,e.jsx(D,{variant:d(s.priority),className:"text-xs font-medium",children:s.priority})]}),e.jsx(K,{className:"mt-2 text-green-800 dark:text-green-100",children:s.description})]},i))})]}),e.jsxs(N,{className:"border-green-900/20 shadow-lg hover:shadow-xl transition-shadow duration-200 backdrop-blur-sm bg-white/50 dark:bg-green-950/50",children:[e.jsxs(v,{children:[e.jsxs(w,{className:"flex items-center gap-2 text-xl text-green-950 dark:text-green-50",children:["Herd Health Monitor",e.jsx(D,{className:"bg-green-900 text-white",children:"Real-time"})]}),e.jsx(F,{className:"text-green-800 dark:text-green-200",children:"AI-powered health monitoring"})]}),e.jsx(k,{children:p.filter(s=>s.type==="health").map((s,i)=>e.jsxs(G,{className:"mb-4 border-l-4 border-green-700 bg-green-50/50 dark:bg-green-900/50",children:[e.jsxs(V,{className:"flex items-center gap-2 text-green-900 dark:text-green-50 font-semibold",children:[s.title,e.jsx(D,{variant:d(s.priority),className:"text-xs font-medium",children:s.priority})]}),e.jsx(K,{className:"mt-2 text-green-800 dark:text-green-100",children:s.description})]},i))})]}),e.jsxs(N,{className:"border-green-900/20 shadow-lg hover:shadow-xl transition-shadow duration-200 backdrop-blur-sm bg-white/50 dark:bg-green-950/50",children:[e.jsxs(v,{children:[e.jsxs(w,{className:"flex items-center gap-2 text-xl text-green-950 dark:text-green-50",children:["Resource Efficiency",e.jsx(D,{className:"bg-green-900 text-white",children:"Analytics"})]}),e.jsx(F,{className:"text-green-800 dark:text-green-200",children:"Resource optimization insights"})]}),e.jsx(k,{children:p.filter(s=>s.type==="efficiency").map((s,i)=>e.jsxs(G,{className:"mb-4 border-l-4 border-green-700 bg-green-50/50 dark:bg-green-900/50",children:[e.jsxs(V,{className:"flex items-center gap-2 text-green-900 dark:text-green-50 font-semibold",children:[s.title,e.jsx(D,{variant:d(s.priority),className:"text-xs font-medium",children:s.priority})]}),e.jsx(K,{className:"mt-2 text-green-800 dark:text-green-100",children:s.description})]},i))})]}),e.jsxs(N,{className:"border-green-900/20 shadow-lg hover:shadow-xl transition-shadow duration-200 backdrop-blur-sm bg-white/50 dark:bg-green-950/50",children:[e.jsxs(v,{children:[e.jsxs(w,{className:"flex items-center gap-2 text-xl text-green-950 dark:text-green-50",children:["Smart Maintenance",e.jsx(D,{className:"bg-green-900 text-white",children:"Predictive"})]}),e.jsx(F,{className:"text-green-800 dark:text-green-200",children:"Equipment and facility maintenance alerts"})]}),e.jsx(k,{children:p.filter(s=>s.type==="maintenance").map((s,i)=>e.jsxs(G,{className:"mb-4 border-l-4 border-green-700 bg-green-50/50 dark:bg-green-900/50",children:[e.jsxs(V,{className:"flex items-center gap-2 text-green-900 dark:text-green-50 font-semibold",children:[s.title,e.jsx(D,{variant:d(s.priority),className:"text-xs font-medium",children:s.priority})]}),e.jsx(K,{className:"mt-2 text-green-800 dark:text-green-100",children:s.description})]},i))})]})]})]})})},Je=({farmerId:t,onNewCollection:c,onKycStatusUpdate:m,onConnectionChange:a})=>{const[l,o]=r.useState([]),[f,b]=r.useState(""),[j,h]=r.useState(!0),[p,S]=r.useState(null),d=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.hostname}:8000/ws/farmer/${t}`,{isConnected:s,error:i,sendMessage:x}=Se(d,{onOpen:()=>{console.log(`Connected to farmer notifications for farmer ${t}`),h(!1),a==null||a(!0)},onClose:()=>{console.log(`Disconnected from farmer notifications for farmer ${t}`),a==null||a(!1)},onError:g=>{console.error("WebSocket error:",g),S("Failed to connect to notifications"),a==null||a(!1)},onMessage:g=>{y(g)}}),y=r.useCallback(g=>{switch(console.log("Received farmer notification:",g),g.event_type){case"new_collection":if(g.data&&typeof g.data=="object"){const C={id:g.data.collection_id,farmerId:g.farmer_id,farmerName:"",staffId:"",staffName:"",liters:g.data.liters,geoPoint:{lat:0,lng:0},photoUrl:"",timestamp:g.data.timestamp,txHash:"",validationCode:g.data.validation_code,qualityGrade:"A",temperature:0,fatContent:0,proteinContent:0};o(R=>[C,...R]),c==null||c(C)}break;case"kyc_status_update":if(g.data&&typeof g.data=="object"){const C=g.data.new_status||"";b(C);const R={id:g.farmer_id,name:"",phone:"",email:"",address:"",nationalId:"",kycStatus:C,registeredAt:""};m==null||m(R)}break;case"connected":console.log("Successfully connected to farmer notifications");break;case"heartbeat":break;default:console.log("Unknown event type:",g.event_type)}},[c,m]),L=r.useCallback(g=>{x(g)},[x]);return r.useEffect(()=>{i&&S("WebSocket connection error")},[i]),{collections:l,kycStatus:f,isConnected:s,isLoading:j,error:p,sendNotification:L}},Ze=(t,c)=>{const[m,a]=r.useState([]),[l,o]=r.useState([]),[f,b]=r.useState([]),[j,h]=r.useState([]),[p,S]=r.useState(null);return r.useEffect(()=>{if(t.length===0)return;const d={};t.forEach(i=>{const x=new Date(i.timestamp).toISOString().split("T")[0];d[x]||(d[x]=0),d[x]+=i.liters});const s=Object.entries(d).map(([i,x])=>({date:i,value:x})).sort((i,x)=>new Date(i.date).getTime()-new Date(x.date).getTime());a(s)},[t]),r.useEffect(()=>{if(t.length===0)return;const d={};t.forEach(i=>{const x=new Date(i.timestamp),y=new Date(x),L=y.getDay(),g=y.getDate()-L+(L===0?-6:1);y.setDate(g),y.setHours(0,0,0,0);const C=y.toISOString().split("T")[0];d[C]||(d[C]=0),d[C]+=i.liters});const s=Object.entries(d).map(([i,x])=>({date:i,value:x})).sort((i,x)=>new Date(i.date).getTime()-new Date(x.date).getTime());o(s)},[t]),r.useEffect(()=>{if(t.length===0)return;const d={};t.forEach(i=>{const x=new Date(i.timestamp),y=`${x.getFullYear()}-${String(x.getMonth()+1).padStart(2,"0")}`;d[y]||(d[y]=0),d[y]+=i.liters});const s=Object.entries(d).map(([i,x])=>({date:i,value:x})).sort((i,x)=>new Date(i.date).getTime()-new Date(x.date).getTime());b(s)},[t]),r.useEffect(()=>{if(t.length===0)return;const d={A:0,B:0,C:0};t.forEach(i=>{i.qualityGrade in d&&d[i.qualityGrade]++});const s=Object.entries(d).map(([i,x])=>({grade:i,count:x}));h(s)},[t]),r.useEffect(()=>{if(t.length===0)return;const d=new Date,s=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`,i=t.filter(E=>{const P=new Date(E.timestamp);return`${P.getFullYear()}-${String(P.getMonth()+1).padStart(2,"0")}`===s}),x=i.reduce((E,P)=>E+P.liters,0),L=x*50,g=new Date(d);g.setMonth(g.getMonth()-1);const C=`${g.getFullYear()}-${String(g.getMonth()+1).padStart(2,"0")}`,q=t.filter(E=>{const P=new Date(E.timestamp);return`${P.getFullYear()}-${String(P.getMonth()+1).padStart(2,"0")}`===C}).reduce((E,P)=>E+P.liters,0);let _=0;q>0?_=(x-q)/q:x>0&&(_=.05);const X=x*(1+_),J=L*(1+_),U=Math.min(.95,.7+i.length*.01);S({currentMonthLiters:parseFloat(x.toFixed(2)),currentMonthAmount:parseFloat(L.toFixed(2)),projectedNextMonthLiters:parseFloat(X.toFixed(2)),projectedNextMonthAmount:parseFloat(J.toFixed(2)),growthRate:parseFloat(_.toFixed(4)),confidenceLevel:parseFloat(U.toFixed(4))})},[t]),{dailyData:m,weeklyData:l,monthlyData:f,qualityData:j,paymentProjection:p}},et=t=>{const[c,m]=r.useState(!1),[a,l]=r.useState(null),[o,f]=r.useState(!1);return{submitDispute:async j=>{m(!0),l(null),f(!1);try{const h={collection_id:j.collectionId,reason:j.reason,description:j.description,farmer_id:t};return await O.Dispute.submit(h),f(!0),!0}catch(h){const p=h instanceof Error?h.message:"Failed to submit dispute";return l(p),!1}finally{m(!1)}},loading:c,error:a,success:o}};function tt({collectionId:t,farmerId:c,onDisputeSubmitted:m}){const[a,l]=r.useState(""),[o,f]=r.useState(""),{submitDispute:b,loading:j,error:h}=et(c),{toast:p}=be(),S=async d=>{if(d.preventDefault(),!a.trim()||!o.trim()){p({title:"Error",description:"Please fill in all fields",variant:"destructive"});return}await b({collectionId:t,reason:a,description:o})?(p({title:"Success",description:"Dispute submitted successfully"}),l(""),f(""),m()):p({title:"Error",description:h||"Failed to submit dispute",variant:"destructive"})};return e.jsxs("form",{onSubmit:S,className:"space-y-4",noValidate:!0,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(oe,{htmlFor:"reason",children:"Reason for Dispute *"}),e.jsx(Ce,{id:"reason",value:a,onChange:d=>l(d.target.value),placeholder:"Enter reason (e.g., incorrect quantity, quality issues)",required:!0,"aria-describedby":"reason-help"}),e.jsx("p",{id:"reason-help",className:"text-sm text-gray-500",children:"Briefly describe why you're disputing this collection"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(oe,{htmlFor:"description",children:"Detailed Description *"}),e.jsx(De,{id:"description",value:o,onChange:d=>f(d.target.value),placeholder:"Provide detailed information about the dispute...",rows:4,required:!0,"aria-describedby":"description-help"}),e.jsx("p",{id:"description-help",className:"text-sm text-gray-500",children:"Include specific details, dates, and any supporting information"})]}),e.jsx(M,{type:"submit",disabled:j,className:"w-full","aria-label":j?"Submitting dispute...":"Submit dispute",children:j?"Submitting...":"Submit Dispute"})]})}const st=r.lazy(()=>z(()=>import("./index-DYSULANo.js"),__vite__mapDeps([0,1,2,3,4])).then(t=>({default:t.PieChart}))),rt=r.lazy(()=>z(()=>import("./index-DYSULANo.js"),__vite__mapDeps([0,1,2,3,4])).then(t=>({default:t.Pie}))),at=r.lazy(()=>z(()=>import("./index-DYSULANo.js"),__vite__mapDeps([0,1,2,3,4])).then(t=>({default:t.Cell}))),nt=r.lazy(()=>z(()=>import("./index-DYSULANo.js"),__vite__mapDeps([0,1,2,3,4])).then(t=>({default:t.ResponsiveContainer}))),it=r.lazy(()=>z(()=>import("./index-DYSULANo.js"),__vite__mapDeps([0,1,2,3,4])).then(t=>({default:t.Tooltip}))),lt=r.lazy(()=>z(()=>import("./index-DYSULANo.js"),__vite__mapDeps([0,1,2,3,4])).then(t=>({default:t.Legend}))),ge=["#16a34a","#22c55e","#86efac","#dcfce7"];function ct({qualityData:t}){const c=t.map(l=>({name:`Grade ${l.grade}`,value:l.count})),m=t.reduce((l,o)=>l+o.count,0),a=t.map(l=>({grade:l.grade,percentage:m>0?Math.round(l.count/m*100):0}));return e.jsxs(N,{className:"border-green-200 bg-white/70 backdrop-blur-sm",children:[e.jsxs(v,{children:[e.jsx(w,{className:"text-gray-900",children:"Quality Dashboard"}),e.jsx(F,{children:"Track your milk quality grades over time"})]}),e.jsx(k,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"h-64",children:[e.jsx("h3",{className:"text-lg font-medium mb-2 text-center",children:"Grade Distribution"}),e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx(Le,{type:"chart"})}),children:e.jsx(nt,{width:"100%",height:"90%",children:e.jsxs(st,{children:[e.jsx(rt,{data:c,cx:"50%",cy:"50%",labelLine:!0,outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:l,percent:o})=>`${l}: ${(o*100).toFixed(0)}%`,children:c.map((l,o)=>e.jsx(at,{fill:ge[o%ge.length]},`cell-${o}`))}),e.jsx(it,{}),e.jsx(lt,{})]})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Grade Statistics"}),a.map(l=>{var o;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("span",{className:"font-medium",children:["Grade ",l.grade]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-lg font-bold text-green-700",children:[l.percentage,"%"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["(",(o=t.find(f=>f.grade===l.grade))==null?void 0:o.count," collections)"]})]})]},l.grade)}),e.jsx("div",{className:"pt-4 border-t border-green-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Total Collections"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:m})]})})]})]})})]})}function ot({projection:t}){const{currentMonthLiters:c,currentMonthAmount:m,projectedNextMonthLiters:a,projectedNextMonthAmount:l,growthRate:o,confidenceLevel:f}=t,b=o>=0;return e.jsxs(N,{className:"border-green-200 bg-white/70 backdrop-blur-sm",children:[e.jsxs(v,{children:[e.jsxs(w,{className:"text-gray-900 flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5 text-green-600"}),"Payment Projections"]}),e.jsx(F,{children:"Estimated earnings based on current production trends"})]}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"font-medium text-green-800 mb-2",children:"Current Month"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Liters"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[c.toFixed(1),"L"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Earnings"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["KSh ",m.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Projected Next Month"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Projected Liters"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[a.toFixed(1),"L"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Projected Earnings"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["KSh ",l.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Growth Rate"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:[b?"+":"",(o*100).toFixed(1),"%"]}),b?e.jsx(W,{className:"h-4 w-4 text-green-600"}):e.jsx(Qe,{className:"h-4 w-4 text-red-600"})]})]}),e.jsx(D,{className:b?"bg-green-100 text-green-700":"bg-red-100 text-red-700",children:b?"Increasing":"Decreasing"})]}),e.jsx("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Projection Confidence"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[(f*100).toFixed(0),"%"]})]}),e.jsx(D,{className:"bg-purple-100 text-purple-700",children:f>.8?"High":f>.6?"Medium":"Low"})]})})]})})]})}Fe.register(Pe,Ee,Te,_e,Ae,Ie);const dt=({data:t,labels:c,title:m,color:a="rgb(99, 102, 241)"})=>{const l={labels:c,datasets:[{label:m||"Data",data:t,backgroundColor:a.replace("rgb","rgba").replace(")",", 0.7)"),borderColor:a,borderWidth:1}]},o={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!!m,text:m||""}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}},x:{grid:{display:!1}}}};return e.jsx("div",{className:"w-full h-full",children:e.jsx(Me,{data:l,options:o})})};function mt({dailyData:t,weeklyData:c,monthlyData:m}){const[a,l]=r.useState("weekly"),o=()=>{switch(a){case"daily":return{data:t.slice(-30).map(h=>h.value),labels:t.slice(-30).map(h=>new Date(h.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),title:"Daily Collections (Last 30 Days)"};case"weekly":return{data:c.slice(-12).map(h=>h.value),labels:c.slice(-12).map(h=>new Date(h.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),title:"Weekly Collections (Last 12 Weeks)"};case"monthly":return{data:m.map(h=>h.value),labels:m.map(h=>{const[p,S]=h.date.split("-");return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(S)-1]} ${p}`}),title:"Monthly Collections"};default:return{data:[],labels:[],title:""}}},{data:f,labels:b,title:j}=o();return e.jsxs(N,{className:"border-green-200 bg-white/70 backdrop-blur-sm",children:[e.jsx(v,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(w,{className:"text-gray-900",children:"Trend Analysis"}),e.jsx(F,{children:"Production trends over time"})]}),e.jsxs(Re,{value:a,onValueChange:h=>l(h),children:[e.jsx($e,{className:"w-[180px]",children:e.jsx(Oe,{placeholder:"Select time range"})}),e.jsxs(ze,{children:[e.jsx(se,{value:"daily",children:"Daily"}),e.jsx(se,{value:"weekly",children:"Weekly"}),e.jsx(se,{value:"monthly",children:"Monthly"})]})]})]})}),e.jsxs(k,{children:[e.jsx("div",{className:"h-80",children:e.jsx(dt,{data:f,labels:b,title:j,color:"rgb(22, 163, 74)"})}),e.jsx("div",{className:"mt-4 text-center text-sm text-gray-600",children:e.jsxs("p",{children:["Showing ",f.length," data points for ",j.toLowerCase()]})})]})]})}const H=({children:t,variant:c="h2",className:m=""})=>{const a="font-[--font-heading] font-bold text-[--foreground]",l={h1:"text-[--text-4xl] leading-[--leading-tight]",h2:"text-[--text-3xl] leading-[--leading-normal]",h3:"text-[--text-2xl] leading-[--leading-normal]",h4:"text-[--text-xl] leading-[--leading-relaxed]"},o=c;return e.jsx(o,{className:`${a} ${l[c]} ${m}`,children:t})},ne=({children:t,variant:c="body",className:m="",as:a="p"})=>{const l="font-[--font-body] text-[--foreground]",o={body:"text-[--text-base] leading-[--leading-normal]",caption:"text-[--text-sm] leading-[--leading-relaxed]",overline:"text-[--text-xs] leading-[--leading-tight] uppercase tracking-wider"};return e.jsx(a,{className:`${l} ${o[c]} ${m}`,children:t})};function xt(){return e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsx(H,{variant:"h1",children:"Responsive Typography Demo"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(H,{variant:"h1",children:"Heading 1"}),e.jsx(H,{variant:"h2",children:"Heading 2"}),e.jsx(H,{variant:"h3",children:"Heading 3"}),e.jsx(H,{variant:"h4",children:"Heading 4"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ne,{variant:"body",children:"This is body text. The font size should scale responsively based on the viewport width. On smaller screens, the text will be smaller, and on larger screens, it will be larger."}),e.jsx(ne,{variant:"caption",children:"This is caption text. It's smaller than body text and should also scale responsively."}),e.jsx(ne,{variant:"overline",children:"This is overline text. It's the smallest text variant and should scale responsively as well."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-[--text-4xl] leading-[--leading-tight] font-[--font-heading]",children:"Direct CSS Variable Usage - H1"}),e.jsx("h2",{className:"text-[--text-3xl] leading-[--leading-normal] font-[--font-heading]",children:"Direct CSS Variable Usage - H2"}),e.jsx("p",{className:"text-[--text-base] leading-[--leading-normal] font-[--font-body]",children:"This paragraph uses CSS variables directly. The text should scale responsively based on the viewport width."})]})]})}function ht({minSwipeDistance:t=50,onSwipeLeft:c,onSwipeRight:m,onSwipeUp:a,onSwipeDown:l}={}){const[o,f]=r.useState(null),[b,j]=r.useState(null),h=r.useRef(null),p=r.useCallback(s=>{const i=s.touches[0];f({x:i.clientX,y:i.clientY}),j(null)},[]),S=r.useCallback(s=>{if(!o)return;const i=s.touches[0];j({x:i.clientX,y:i.clientY})},[o]),d=r.useCallback(()=>{if(!o||!b)return;const s=o.x-b.x,i=o.y-b.y,x=s>t,y=s<-t,L=i>t,g=i<-t;Math.abs(s)>Math.abs(i)?x&&c?c():y&&m&&m():L&&a?a():g&&l&&l(),f(null),j(null)},[o,b,t,c,m,a,l]);return r.useEffect(()=>{const s=h.current;if(s)return s.addEventListener("touchstart",p),s.addEventListener("touchmove",S),s.addEventListener("touchend",d),()=>{s.removeEventListener("touchstart",p),s.removeEventListener("touchmove",S),s.removeEventListener("touchend",d)}},[p,S,d]),{elementRef:h}}const gt=[{name:"Dashboard",href:"/farmer",icon:We},{name:"Collections",href:"/farmer/collections",icon:I},{name:"Payments",href:"/farmer/payments",icon:Q},{name:"Analytics",href:"/farmer/analytics",icon:le},{name:"Profile",href:"/farmer/profile",icon:Ne},{name:"Documents",href:"/farmer/documents",icon:Ye},{name:"Notifications",href:"/farmer/notifications",icon:Ge},{name:"Settings",href:"/farmer/settings",icon:Ue}];function ut(){const[t,c]=r.useState(!1),{elementRef:m}=ht({onSwipeLeft:()=>c(!1),minSwipeDistance:30});return e.jsxs(qe,{open:t,onOpenChange:c,children:[e.jsx(Be,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"icon",className:"md:hidden border-green-300 text-green-700 hover:bg-green-50",children:[e.jsx(Ke,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"Toggle navigation menu"})]})}),e.jsx(He,{side:"left",className:"w-[300px] sm:w-[400px] bg-gradient-to-b from-green-50 to-emerald-50 border-r border-green-200",ref:m,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-600 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(I,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold bg-gradient-to-r from-green-700 to-emerald-700 bg-clip-text text-transparent",children:"DairyChain Pro"}),e.jsx("p",{className:"text-xs text-green-600",children:"Farmer Portal"})]})]}),e.jsxs(M,{variant:"ghost",size:"icon",onClick:()=>c(!1),className:"text-green-700 hover:bg-green-100",children:[e.jsx(ye,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"Close menu"})]})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-4",role:"navigation","aria-label":"Mobile navigation",children:e.jsx("div",{className:"space-y-1 px-2",children:gt.map(a=>{const l=a.icon,o=location.pathname===a.href;return e.jsxs(ie,{to:a.href,className:"flex items-center space-x-3 rounded-lg px-4 py-3 text-base font-medium text-green-700 hover:bg-green-100 transition-colors",onClick:()=>c(!1),"aria-current":o?"page":void 0,children:[e.jsx(l,{className:"h-5 w-5"}),e.jsx("span",{children:a.name})]},a.name)})})}),e.jsx("div",{className:"p-4 border-t border-green-200",children:e.jsx(M,{variant:"outline",className:"w-full border-green-300 text-green-700 hover:bg-green-50",onClick:()=>c(!1),children:"Close Menu"})})]})})]})}const Kt=()=>{const{user:t}=ve(),[c,m]=r.useState(null),[a,l]=r.useState([]),[o,f]=r.useState([]),[b,j]=r.useState(!0),[h,p]=r.useState(null),[S,d]=r.useState("connecting"),[s,i]=r.useState(!1),[x,y]=r.useState(null),{collections:L,kycStatus:g,isConnected:C,isLoading:R}=Je({farmerId:(c==null?void 0:c.id)||"",onNewCollection:n=>{l(u=>[n,...u]),A.info(`New collection received via WebSocket: ${n.liters}L`)},onKycStatusUpdate:n=>{m(u=>({...u,kyc_status:n.kyc_status})),A.info(`KYC status updated via WebSocket: ${n.kyc_status}`)},onConnectionChange:n=>{d(n?"connected":"disconnected")}}),{dailyData:q,weeklyData:_,monthlyData:X,qualityData:J}=Ze(a),[U,E]=r.useState(null),P=r.useCallback((n,u)=>{const $=new Set(n.map(B=>B.id));return[...u.filter(B=>!$.has(B.id)),...n]},[]);if(r.useEffect(()=>(A.info("Farmer Portal page loaded"),(async()=>{if(t)try{j(!0);const u=await O.Farmers.get(t.id);m(u);const $=await O.Collections.list(100,0,t.id);l($.items);const T=await O.Payments.list(100,0,t.id);f(T);const B=await O.Payments.getProjections(t.id);E(B)}catch(u){console.error("Error fetching farmer data:",u),u.message&&u.message.includes("401")?(p("Authentication failed. Please log in again."),window.location.href="/farmer/login"):u.message&&u.message.includes("403")?p("Access denied. You do not have permission to view this data."):p("Failed to load farmer data. Please try again later.")}finally{j(!1)}})(),()=>{A.debug("Farmer Portal page unmounted")}),[t]),r.useEffect(()=>{L.length>0&&l(n=>P(n,L))},[L,P]),b||R)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});if(h)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsxs("div",{className:"text-red-500 text-center",children:[e.jsxs("p",{children:["Error loading farmer portal: ",h]}),e.jsx(M,{onClick:()=>window.location.reload(),className:"mt-4",children:"Retry"})]})});if(!c)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("p",{children:"No farmer data available"})});const Z=new Date().toDateString(),Y=a.filter(n=>new Date(n.timestamp).toDateString()===Z),pe=a.slice(0,5),ee=a.filter(n=>new Date(n.timestamp).getMonth()===new Date().getMonth()).reduce((n,u)=>n+u.liters,0),ce=async n=>{try{const u=await O.Collections.downloadReceipt(n),$=window.URL.createObjectURL(u),T=document.createElement("a");T.href=$,T.download=`collection-receipt-${n}.pdf`,document.body.appendChild(T),T.click(),window.URL.revokeObjectURL($),document.body.removeChild(T),A.info(`Receipt downloaded for collection ${n}`)}catch(u){console.error("Error downloading receipt:",u),alert("Failed to download receipt. Please try again.")}},fe=n=>{y(n),i(!0)},je=()=>{i(!1),y(null)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50",children:[e.jsx("header",{className:"border-b border-green-200 bg-white/90 backdrop-blur-sm sticky top-0 z-50 shadow-sm",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(ut,{}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-600 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(I,{className:"h-7 w-7 text-white"})}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-green-700 to-emerald-700 bg-clip-text text-transparent",children:"Farmer Dashboard"}),e.jsxs("p",{className:"text-green-600 flex items-center gap-1",children:[e.jsx(we,{className:"h-3 w-3"}),"Welcome back, ",c.name]})]})]}),e.jsxs("div",{className:"flex items-center space-x-sm",children:[e.jsx(D,{className:`${C?"bg-green-100 text-green-700 border-green-200":"bg-red-100 text-red-700 border-red-200"}`,children:C?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),"Live Updates"]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"h-3 w-3 mr-1"}),"Connecting..."]})}),e.jsxs(D,{className:"bg-green-100 text-green-700 border-green-200 hidden md:inline-flex",children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),g||c.kycStatus||"pending"]}),e.jsx(ie,{to:"/farmer/dashboard",className:"hidden md:inline-flex",children:e.jsx(M,{variant:"outline",className:"border-green-300 hover:bg-green-50 text-green-700",children:"New Dashboard"})}),e.jsx(ie,{to:"/",className:"hidden md:inline-flex",children:e.jsx(M,{variant:"outline",className:"border-green-300 hover:bg-green-50 text-green-700",children:"Back to Home"})})]})]})})}),e.jsxs("main",{className:"container mx-auto p-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-lg mb-xl",children:[e.jsxs(N,{className:"border-green-200 hover:shadow-lg transition-shadow bg-gradient-to-br from-white to-green-50/30",children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(w,{className:"text-sm font-medium text-green-700",children:"This Month"}),e.jsx(I,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(k,{children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[ee,"L"]}),e.jsxs("p",{className:"text-xs text-green-600",children:[e.jsx("span",{className:"text-emerald-600",children:"+12%"})," from last month"]})]})]}),e.jsxs(N,{className:"border-green-200 hover:shadow-lg transition-shadow bg-gradient-to-br from-white to-emerald-50/30",children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(w,{className:"text-sm font-medium text-green-700",children:"Total Earnings"}),e.jsx(Q,{className:"h-4 w-4 text-emerald-600"})]}),e.jsxs(k,{children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["KSh ",o.reduce((n,u)=>n+(u.total_amount||0),0).toLocaleString()]}),e.jsxs("p",{className:"text-xs text-green-600",children:[e.jsx("span",{className:"text-emerald-600",children:"+8%"})," growth rate"]})]})]}),e.jsxs(N,{className:"border-green-200 hover:shadow-lg transition-shadow bg-gradient-to-br from-white to-teal-50/30",children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(w,{className:"text-sm font-medium text-green-700",children:"Average Quality"}),e.jsx(W,{className:"h-4 w-4 text-teal-600"})]}),e.jsxs(k,{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"Grade A"}),e.jsxs("p",{className:"text-xs text-green-600",children:[e.jsx("span",{className:"text-emerald-600",children:"Excellent"})," quality score"]})]})]}),e.jsxs(N,{className:"border-green-200 hover:shadow-lg transition-shadow bg-gradient-to-br from-white to-blue-50/30",children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(w,{className:"text-sm font-medium text-green-700",children:"Deliveries"}),e.jsx(de,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(k,{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.length}),e.jsx("p",{className:"text-xs text-green-600",children:"Total collections"})]})]})]}),Y.length>0&&e.jsxs(N,{className:"border-green-200 bg-white/70 backdrop-blur-sm mb-8",children:[e.jsxs(v,{children:[e.jsxs(w,{className:"text-gray-900 flex items-center",children:[e.jsx(I,{className:"h-5 w-5 mr-2 text-green-600"}),"Today's Collections"]}),e.jsxs(F,{children:[Y.length," collection",Y.length!==1?"s":""," today"]})]}),e.jsx(k,{children:e.jsx("div",{className:"space-y-lg",children:Y.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-md border border-green-200 rounded-lg bg-gradient-to-r from-green-50 to-emerald-50 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-500 rounded-lg flex items-center justify-center",children:e.jsx(I,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[n.liters,"L delivered"]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(ae,{className:"h-3 w-3"}),e.jsx("span",{children:new Date(n.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.jsx(me,{className:"h-3 w-3 ml-2"}),e.jsx("span",{children:"Collection Center"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(D,{className:"bg-green-100 text-green-700 border-green-200",children:["Grade ",n.quality_grade]}),e.jsx(M,{size:"sm",variant:"outline",className:"border-green-300 text-green-700 hover:bg-green-50",onClick:()=>ce(n.id),children:e.jsx(xe,{className:"h-4 w-4"})})]})]},n.id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-xl mb-xl",children:[e.jsx(mt,{dailyData:q,weeklyData:_,monthlyData:X}),e.jsx(ct,{qualityData:J})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-xl mb-xl",children:[e.jsxs(N,{className:"border-green-200 bg-white/70 backdrop-blur-sm",children:[e.jsxs(v,{children:[e.jsxs(w,{className:"text-gray-900 flex items-center",children:[e.jsx(ke,{className:"h-5 w-5 mr-2 text-green-600"}),"Recent Collections"]}),e.jsx(F,{children:"Your latest milk deliveries and quality grades"})]}),e.jsxs(k,{children:[e.jsx("div",{className:"space-y-lg",children:pe.map(n=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-md border border-green-200 rounded-lg bg-gradient-to-r from-green-50 to-emerald-50 gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-500 rounded-lg flex items-center justify-center",children:e.jsx(I,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[n.liters,"L delivered"]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(de,{className:"h-3 w-3"}),e.jsx("span",{children:new Date(n.timestamp).toLocaleDateString()}),e.jsx(me,{className:"h-3 w-3 ml-2"}),e.jsx("span",{children:"Collection Center"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(D,{className:"bg-green-100 text-green-700 border-green-200 mb-1",children:["Grade ",n.quality_grade]}),e.jsxs("div",{className:"flex flex-row sm:flex-col space-x-1 sm:space-x-0 sm:space-y-1",children:[e.jsx(M,{size:"sm",variant:"outline",className:"border-green-300 text-green-700 hover:bg-green-50 h-8",onClick:()=>ce(n.id),children:e.jsx(xe,{className:"h-4 w-4"})}),e.jsx(M,{size:"sm",variant:"outline",className:"border-red-300 text-red-700 hover:bg-red-50 h-8",onClick:()=>fe(n.id),children:e.jsx(he,{className:"h-4 w-4"})})]})]})]},n.id))}),e.jsx(M,{variant:"outline",className:"w-full mt-4 border-green-300 text-green-700 hover:bg-green-50",children:"View All Collections"})]})]}),e.jsxs("div",{className:"space-y-8",children:[U&&e.jsx(ot,{projection:U}),e.jsxs(N,{className:"border-green-200 bg-white/70 backdrop-blur-sm",children:[e.jsxs(v,{children:[e.jsxs(w,{className:"text-gray-900 flex items-center",children:[e.jsx(Q,{className:"h-5 w-5 mr-2 text-emerald-600"}),"Payment History"]}),e.jsx(F,{children:"Track your earnings and payment status"})]}),e.jsxs(k,{children:[e.jsx("div",{className:"space-y-4",children:o.slice(0,4).map(n=>{var u;return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-4 border border-green-200 rounded-lg bg-gradient-to-r from-emerald-50 to-teal-50 gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-lg flex items-center justify-center",children:e.jsx(Q,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["KSh ",((u=n.total_amount)==null?void 0:u.toLocaleString())||"0"]}),e.jsxs("div",{className:"flex flex-wrap items-center space-x-2 text-sm text-gray-600",children:[e.jsx(ae,{className:"h-3 w-3"}),e.jsx("span",{children:n.paid_at?new Date(n.paid_at).toLocaleDateString():"Pending"}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[n.total_liters,"L @ KSh ",n.rate_per_liter,"/L"]})]})]})]}),e.jsx(D,{className:n.status==="paid"||n.status==="completed"?"bg-green-100 text-green-700 border-green-200 mt-2 sm:mt-0":"bg-yellow-100 text-yellow-700 border-yellow-200 mt-2 sm:mt-0",children:n.status})]},n.id)})}),e.jsx(M,{variant:"outline",className:"w-full mt-4 border-green-300 text-green-700 hover:bg-green-50",children:"View Payment Details"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs(N,{className:"border-green-200 bg-white/70 backdrop-blur-sm",children:[e.jsxs(v,{children:[e.jsxs(w,{className:"text-gray-900 flex items-center",children:[e.jsx(le,{className:"h-5 w-5 mr-2 text-blue-600"}),"Monthly Performance"]}),e.jsx(F,{children:"Track your progress and goals"})]}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-700",children:"Monthly Target"}),e.jsxs("span",{className:"text-gray-900 font-medium",children:[ee,"L / 800L"]})]}),e.jsx(te,{value:ee/800*100,className:"h-3"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-700",children:"Quality Score"}),e.jsxs("span",{className:"text-gray-900 font-medium",children:[a.length>0?(a.reduce((n,u)=>n+(u.quality_grade==="A"?5:u.quality_grade==="B"?4:3),0)/a.length).toFixed(1):"0","/5.0"]})]}),e.jsx(te,{value:a.length>0?a.reduce((n,u)=>n+(u.quality_grade==="A"?100:u.quality_grade==="B"?80:60),0)/a.length:0,className:"h-3"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-700",children:"Consistency"}),e.jsxs("span",{className:"text-gray-900 font-medium",children:[a.length," days"]})]}),e.jsx(te,{value:a.length>0?Math.min(100,a.length/30*100):0,className:"h-3"})]})]})})]}),e.jsxs(N,{className:"border-green-200 bg-white/70 backdrop-blur-sm",children:[e.jsxs(v,{children:[e.jsxs(w,{className:"text-gray-900 flex items-center",children:[e.jsx(W,{className:"h-5 w-5 mr-2 text-green-600"}),"Farm Insights"]}),e.jsx(F,{children:"AI-powered recommendations for your farm"})]}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(W,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"font-medium text-green-800",children:"Production Trending Up"})]}),e.jsx("p",{className:"text-sm text-green-700",children:"Your milk production has increased by 12% this month. Keep up the excellent work!"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(le,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-800",children:"Quality Excellence"})]}),e.jsx("p",{className:"text-sm text-blue-700",children:"Consistent Grade A quality. Your feeding practices are showing great results."})]}),e.jsxs("div",{className:"p-3 bg-emerald-50 border border-emerald-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(re,{className:"h-4 w-4 text-emerald-600"}),e.jsx("span",{className:"font-medium text-emerald-800",children:"Payment On Track"})]}),e.jsx("p",{className:"text-sm text-emerald-700",children:"All payments processed on time. No outstanding balances."})]})]})})]})]}),s&&x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(N,{className:"w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs(v,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5 text-red-600"}),"Submit Dispute"]}),e.jsx(F,{children:"Report an issue with your collection"})]}),e.jsxs(k,{children:[e.jsx(tt,{collectionId:x,farmerId:c.id,onDisputeSubmitted:je}),e.jsx(M,{variant:"outline",className:"w-full mt-4",onClick:()=>i(!1),children:"Cancel"})]})]})}),e.jsx("div",{className:"mb-8",children:e.jsx(xt,{})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-2 flex items-center justify-center gap-2",children:[e.jsx(Ve,{className:"h-6 w-6 text-green-600"}),"Your Personal Farm AI Assistant"]}),e.jsx("p",{className:"text-gray-600",children:"Get personalized farming advice and insights powered by advanced AI"})]}),e.jsx(Xe,{})]})]})]})};export{Kt as default};
